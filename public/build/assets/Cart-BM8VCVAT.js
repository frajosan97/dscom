import{r as u,R as d,q as X,u as G,j as r,$ as H,Y as x,m as J}from"./app-rlNx4Iiu.js";import{A as K,T as R}from"./AppLayout-up_6glbm.js";import{x as Z}from"./axios-BGSb5e6B.js";import{C as ee,B as p,I as re}from"./Image-BuCKbu51.js";import{C as m}from"./Card-Xz6cOBHW.js";import{P as l,R as te,k as ne}from"./Footer-UqFNTOz4.js";import{C as A,F as w}from"./Form-lYHRddvs.js";import{T as se}from"./Table-DemdZvHG.js";import{B as ie}from"./Badge-JDmlgAPC.js";import{A as q}from"./Alert-CQmkJ-mq.js";import{S as oe}from"./Spinner-BbRf1DHU.js";import"./useData-OMMcoF16.js";import"./ListGroup-H7w0BALe.js";import"./CloseButton-BnZ8vsiJ.js";function O(){return O=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},O.apply(this,arguments)}function ae(e,i){if(e==null)return{};var s=le(e,i),t,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],!(i.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}function le(e,i){if(e==null)return{};var s={},t=Object.keys(e),n,o;for(o=0;o<t.length;o++)n=t[o],!(i.indexOf(n)>=0)&&(s[n]=e[n]);return s}var $=u.forwardRef(function(e,i){var s=e.color,t=s===void 0?"currentColor":s,n=e.size,o=n===void 0?24:n,c=ae(e,["color","size"]);return d.createElement("svg",O({ref:i,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),d.createElement("polyline",{points:"12 19 5 12 12 5"}))});$.propTypes={color:l.string,size:l.oneOfType([l.string,l.number])};$.displayName="ArrowLeft";function N(){return N=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},N.apply(this,arguments)}function ce(e,i){if(e==null)return{};var s=de(e,i),t,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],!(i.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}function de(e,i){if(e==null)return{};var s={},t=Object.keys(e),n,o;for(o=0;o<t.length;o++)n=t[o],!(i.indexOf(n)>=0)&&(s[n]=e[n]);return s}var E=u.forwardRef(function(e,i){var s=e.color,t=s===void 0?"currentColor":s,n=e.size,o=n===void 0?24:n,c=ce(e,["color","size"]);return d.createElement("svg",N({ref:i,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),d.createElement("polyline",{points:"22 4 12 14.01 9 11.01"}))});E.propTypes={color:l.string,size:l.oneOfType([l.string,l.number])};E.displayName="CheckCircle";function C(){return C=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},C.apply(this,arguments)}function pe(e,i){if(e==null)return{};var s=ue(e,i),t,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],!(i.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}function ue(e,i){if(e==null)return{};var s={},t=Object.keys(e),n,o;for(o=0;o<t.length;o++)n=t[o],!(i.indexOf(n)>=0)&&(s[n]=e[n]);return s}var S=u.forwardRef(function(e,i){var s=e.color,t=s===void 0?"currentColor":s,n=e.size,o=n===void 0?24:n,c=pe(e,["color","size"]);return d.createElement("svg",C({ref:i,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))});S.propTypes={color:l.string,size:l.oneOfType([l.string,l.number])};S.displayName="Minus";function k(){return k=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},k.apply(this,arguments)}function me(e,i){if(e==null)return{};var s=he(e,i),t,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],!(i.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}function he(e,i){if(e==null)return{};var s={},t=Object.keys(e),n,o;for(o=0;o<t.length;o++)n=t[o],!(i.indexOf(n)>=0)&&(s[n]=e[n]);return s}var T=u.forwardRef(function(e,i){var s=e.color,t=s===void 0?"currentColor":s,n=e.size,o=n===void 0?24:n,c=me(e,["color","size"]);return d.createElement("svg",k({ref:i,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),d.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))});T.propTypes={color:l.string,size:l.oneOfType([l.string,l.number])};T.displayName="Plus";function z(){return z=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},z.apply(this,arguments)}function fe(e,i){if(e==null)return{};var s=xe(e,i),t,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],!(i.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}function xe(e,i){if(e==null)return{};var s={},t=Object.keys(e),n,o;for(o=0;o<t.length;o++)n=t[o],!(i.indexOf(n)>=0)&&(s[n]=e[n]);return s}var j=u.forwardRef(function(e,i){var s=e.color,t=s===void 0?"currentColor":s,n=e.size,o=n===void 0?24:n,c=fe(e,["color","size"]);return d.createElement("svg",z({ref:i,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("polyline",{points:"3 6 5 6 21 6"}),d.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}))});j.propTypes={color:l.string,size:l.oneOfType([l.string,l.number])};j.displayName="Trash";function P(){return P=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},P.apply(this,arguments)}function je(e,i){if(e==null)return{};var s=ge(e,i),t,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],!(i.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}function ge(e,i){if(e==null)return{};var s={},t=Object.keys(e),n,o;for(o=0;o<t.length;o++)n=t[o],!(i.indexOf(n)>=0)&&(s[n]=e[n]);return s}var L=u.forwardRef(function(e,i){var s=e.color,t=s===void 0?"currentColor":s,n=e.size,o=n===void 0?24:n,c=je(e,["color","size"]);return d.createElement("svg",P({ref:i,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("circle",{cx:"12",cy:"12",r:"10"}),d.createElement("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),d.createElement("line",{x1:"9",y1:"9",x2:"15",y2:"15"}))});L.propTypes={color:l.string,size:l.oneOfType([l.string,l.number])};L.displayName="XCircle";function Le(){const{auth:e}=X().props,{cartItems:i=[],addToCart:s=()=>{},removeFromCart:t=()=>{},updateQuantity:n=()=>{},clearCart:o=()=>{},cartTotal:c=0,itemCount:g=0}=G(),[_,y]=u.useState(!1),[W,f]=u.useState(null),[v,B]=u.useState(""),[h,I]=u.useState(0),[F,Y]=u.useState(0),V=async()=>{y(!0);try{if(e!=null&&e.user){const a=await Z.post(route("cart.checkout"),{cartItems:i,cartTotal:c,itemCount:g,discount:h});a.status===200&&(Y(a.data.orderNumber),y(!1),f("success"),o())}else J.get(route("login"))}catch{y(!1),f("error")}},M=()=>{v.toUpperCase()==="SAVE10"?(I(c*.1),f(null)):v&&f("invalid_coupon")},Q=()=>{B(""),I(0),f(null)},D=c-h;return r.jsxs(K,{children:[r.jsx(H,{title:"Your Shopping Cart"}),r.jsx(ee,{className:"py-4",children:W==="success"?r.jsx(m,{className:"border-0 shadow-sm py-5",children:r.jsxs(m.Body,{className:"text-center py-5",children:[r.jsx(E,{size:48,className:"text-success mb-3"}),r.jsx("h3",{children:"Order Placed Successfully!"}),r.jsxs("p",{className:"text-muted mb-4",children:["Thank you for your purchase. Your order number is #",F,"."]}),r.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[r.jsx(p,{as:x,href:"/",variant:"primary",children:"Continue Shopping"}),r.jsx(p,{as:x,href:"/orders",variant:"outline-primary",children:"View Orders"})]})]})}):i.length===0?r.jsx(m,{className:"border-0 shadow-sm py-5",children:r.jsxs(m.Body,{className:"text-center py-5",children:[r.jsx(R,{size:48,className:"text-muted mb-3"}),r.jsx("h4",{children:"Your cart is empty"}),r.jsx("p",{className:"text-muted mb-4",children:"Looks like you haven't added any items to your cart yet"}),r.jsx(p,{as:x,href:"/",variant:"primary",children:"Continue Shopping"})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[r.jsxs("h2",{className:"mb-0",children:["Your Cart (",g," ",g===1?"item":"items",")"]}),r.jsxs(p,{variant:"outline-danger",size:"sm",onClick:o,children:[r.jsx(j,{size:16,className:"me-1"})," Clear Cart"]})]}),r.jsxs(te,{children:[r.jsxs(A,{lg:8,children:[r.jsx(m,{className:"border-0 shadow-sm mb-4",children:r.jsx(m.Body,{className:"p-0",children:r.jsxs(se,{responsive:!0,className:"mb-0",children:[r.jsx("thead",{className:"bg-light",children:r.jsxs("tr",{children:[r.jsx("th",{children:"Product"}),r.jsx("th",{className:"text-end",children:"Price"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{className:"text-end",children:"Total"}),r.jsx("th",{})]})}),r.jsx("tbody",{children:i.map(a=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{className:"d-flex align-items-center",children:[r.jsx(re,{src:a.image||"/images/placeholder-product.png",alt:a.name,width:80,height:80,className:"me-3 rounded border object-fit-cover",style:{minWidth:"80px"}}),r.jsxs("div",{children:[r.jsx("h6",{className:"mb-1",children:a.name}),a.color&&r.jsxs("div",{className:"d-flex align-items-center mb-1",children:[r.jsx("span",{className:"text-muted me-2",children:"Color:"}),r.jsx("span",{className:"d-inline-block rounded-circle",style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #dee2e6"}})]}),a.size&&r.jsxs("div",{className:"d-flex align-items-center",children:[r.jsx("span",{className:"text-muted me-2",children:"Size:"}),r.jsx(ie,{bg:"light",text:"dark",children:a.size})]})]})]})}),r.jsxs("td",{className:"align-middle text-end",children:["$",a.price]}),r.jsx("td",{className:"align-middle",children:r.jsxs("div",{className:"d-flex align-items-center",children:[r.jsx(p,{variant:"outline-secondary",size:"sm",className:"px-2 py-0",onClick:()=>n(a.id,a.quantity-1,a.variant),disabled:a.quantity<=1,children:r.jsx(S,{size:14})}),r.jsx(w.Control,{type:"number",min:"1",value:a.quantity,onChange:U=>{const b=parseInt(U.target.value);!isNaN(b)&&b>0&&n(a.id,b,a.variant)},className:"mx-2 text-center",style:{width:"60px"}}),r.jsx(p,{variant:"outline-secondary",size:"sm",className:"px-2 py-0",onClick:()=>n(a.id,a.quantity+1,a.variant),children:r.jsx(T,{size:14})})]})}),r.jsxs("td",{className:"align-middle text-end fw-bold",children:["$",a.price*a.quantity]}),r.jsx("td",{className:"align-middle text-end",children:r.jsx(p,{variant:"link",className:"text-danger p-0",onClick:()=>t(a.id,a.variant),children:r.jsx(j,{size:18})})})]},`${a.id}-${a.variant}`))})]})})}),r.jsxs("div",{className:"d-flex justify-content-between mb-4",children:[r.jsxs(p,{as:x,href:"/",variant:"outline-primary",children:[r.jsx($,{size:16,className:"me-1"})," ","Continue Shopping"]}),r.jsx(p,{variant:"outline-secondary",onClick:()=>window.location.reload(),children:"Update Cart"})]})]}),r.jsx(A,{lg:4,children:r.jsx(m,{className:"border-0 shadow-sm",children:r.jsxs(m.Body,{children:[r.jsx("h5",{className:"mb-4",children:"Order Summary"}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:["$",c]})]}),r.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[r.jsx("span",{children:"Shipping:"}),r.jsx("span",{children:c>50?"Free":"$5.99"})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx(w.Group,{controlId:"couponCode",children:r.jsxs("div",{className:"input-group",children:[r.jsx(w.Control,{type:"text",placeholder:"Coupon code",value:v,onChange:a=>B(a.target.value)}),r.jsx(p,{variant:h>0?"success":"outline-secondary",onClick:h>0?Q:M,children:h>0?"Applied":"Apply"})]})}),W==="invalid_coupon"&&r.jsxs(q,{variant:"danger",className:"mt-2 py-1 small",children:[r.jsx(L,{size:14,className:"me-1"}),"Invalid coupon code"]}),h>0&&r.jsxs("div",{className:"d-flex justify-content-between mt-2",children:[r.jsx("span",{children:"Discount:"}),r.jsxs("span",{className:"text-success",children:["-$",h]})]})]}),r.jsx("hr",{}),r.jsxs("div",{className:"d-flex justify-content-between fw-bold fs-5",children:[r.jsx("span",{children:"Total:"}),r.jsxs("span",{children:["$",D]})]})]}),r.jsxs(q,{variant:"info",className:"d-flex align-items-center small",children:[r.jsx(R,{size:16,className:"me-2"}),c>50?"You qualify for free shipping!":`Spend $${50-c} more for free shipping`]}),r.jsx(p,{variant:"primary",size:"lg",className:"w-100 mb-3",onClick:V,disabled:_,children:_?r.jsxs(r.Fragment,{children:[r.jsx(oe,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ne,{size:18,className:"me-2"}),"Proceed to Checkout"]})}),r.jsxs("div",{className:"text-center small text-muted",children:["or"," ",r.jsx(x,{href:"/",children:"continue shopping"})]})]})})})]})]})})]})}export{Le as default};
