import{r as g,R as L,q as ne,j as e,$ as ie}from"./app-rlNx4Iiu.js";import{E as ce}from"./ErpLayout-C6UZf7Lx.js";import{A as de}from"./Alert-CQmkJ-mq.js";import{P as S,R as y,I as R,D as b}from"./Footer-UqFNTOz4.js";import{C as n,F as r}from"./Form-lYHRddvs.js";import{B as N}from"./Image-BuCKbu51.js";import{P as V}from"./plus-circle-j9Uce8Dz.js";import{C as m}from"./Card-Xz6cOBHW.js";import{C as H,X as K}from"./x-circle-D1duwfKj.js";import{C as W}from"./clock-YQsAzzX4.js";import{R as oe}from"./receipt-DRgSGhGt.js";import{S as me}from"./search-CuIszRt-.js";import{T as xe}from"./Tabs-DpdwlD7r.js";import{T as P}from"./Tab-C6XqvB9Q.js";import{T as ue}from"./Table-DemdZvHG.js";import{P as he,C as pe}from"./person-FfioBIRV.js";import{E as je}from"./eye-BJPJ7Ivw.js";import{P as ge}from"./pencil-qkcr0OYg.js";import{D as ve}from"./download-yvYlXW3S.js";import{T as ye}from"./trash-nw6iGlQe.js";import{M as j}from"./Modal-BkW5MwN6.js";import{B as w}from"./Badge-JDmlgAPC.js";/* empty css                      */import"./CloseButton-BnZ8vsiJ.js";var fe=["color","size","title","className"];function M(){return M=Object.assign?Object.assign.bind():function(i){for(var u=1;u<arguments.length;u++){var c=arguments[u];for(var d in c)({}).hasOwnProperty.call(c,d)&&(i[d]=c[d])}return i},M.apply(null,arguments)}function be(i,u){if(i==null)return{};var c,d,p=Ne(i,u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(i);for(d=0;d<h.length;d++)c=h[d],u.indexOf(c)===-1&&{}.propertyIsEnumerable.call(i,c)&&(p[c]=i[c])}return p}function Ne(i,u){if(i==null)return{};var c={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(u.indexOf(d)!==-1)continue;c[d]=i[d]}return c}var q=g.forwardRef(function(i,u){var c=i.color,d=c===void 0?"currentColor":c,p=i.size,h=p===void 0?"1em":p,T=i.title,v=T===void 0?null:T,D=i.className,C=D===void 0?"":D,O=be(i,fe);return L.createElement("svg",M({ref:u,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:h,height:h,fill:d,className:["bi","bi-file-earmark-text",C].filter(Boolean).join(" ")},O),v?L.createElement("title",null,v):null,L.createElement("path",{d:"M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5"}),L.createElement("path",{d:"M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z"}))});q.propTypes={color:S.string,size:S.oneOfType([S.string,S.number]),title:S.string,className:S.string};function Qe(){const{flash:i}=ne().props,[u,c]=g.useState(!1),[d,p]=g.useState(!1),[h,T]=g.useState(""),[v,D]=g.useState("all"),[C,O]=g.useState(null),[I,z]=g.useState(null),$=[{id:1,name:"Acme Corporation",type:"customer",email:"acme@example.com"},{id:2,name:"Global Tech Solutions",type:"customer",email:"tech@example.com"},{id:3,name:"Paper Supplies Ltd",type:"supplier",email:"paper@example.com"},{id:4,name:"Office Equipment Co",type:"supplier",email:"office@example.com"},{id:5,name:"Digital Marketing Pro",type:"supplier",email:"marketing@example.com"}],[f,E]=g.useState([{id:"INV-2025-001",type:"sales",party:"Acme Corporation",partyEmail:"acme@example.com",date:"2025-10-01",due_date:"2025-10-15",amount:1200,tax:120,total:1320,status:"paid",reference:"SO-001",items:[{description:"Website Development",quantity:1,price:1e3,amount:1e3},{description:"Domain Registration",quantity:1,price:200,amount:200}],notes:"Thank you for your business!"},{id:"INV-2025-002",type:"purchase",party:"Paper Supplies Ltd",partyEmail:"paper@example.com",date:"2025-10-05",due_date:"2025-10-20",amount:450,tax:45,total:495,status:"pending",reference:"PO-001",items:[{description:"Office Paper",quantity:10,price:45,amount:450}],notes:"Monthly office supplies"},{id:"INV-2025-003",type:"sales",party:"Global Tech Solutions",partyEmail:"tech@example.com",date:"2025-10-10",due_date:"2025-10-25",amount:2750,tax:275,total:3025,status:"overdue",reference:"SO-002",items:[{description:"E-commerce Platform",quantity:1,price:2e3,amount:2e3},{description:"SSL Certificate",quantity:1,price:750,amount:750}],notes:"Project completion invoice"},{id:"INV-2025-004",type:"purchase",party:"Digital Marketing Pro",partyEmail:"marketing@example.com",date:"2025-10-12",due_date:"2025-10-27",amount:1500,tax:150,total:1650,status:"draft",reference:"PO-002",items:[{description:"Google Ads Management",quantity:1,price:1500,amount:1500}],notes:"Q4 Marketing campaign"}]),[a,x]=g.useState({type:"sales",party:"",partyEmail:"",date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+15*24*60*60*1e3).toISOString().split("T")[0],reference:"",items:[{description:"",quantity:1,price:0,amount:0}],tax_rate:10,notes:"",status:"draft"}),G=g.useMemo(()=>f.filter(s=>{const t=s.id.toLowerCase().includes(h.toLowerCase())||s.party.toLowerCase().includes(h.toLowerCase())||s.reference.toLowerCase().includes(h.toLowerCase()),l=v==="all"||v==="sales"&&s.type==="sales"||v==="purchase"&&s.type==="purchase"||v===s.status;return t&&l}),[f,h,v]),A=s=>{const t=s.items.reduce((re,le)=>re+(le.amount||0),0),l=t*(s.tax_rate/100),o=t+l;return{amount:t,tax:l,total:o}},Q=()=>{const s=A(a),t=`INV-${new Date().getFullYear()}-${String(f.length+1).padStart(3,"0")}`,l={...a,id:t,...s,items:a.items.map(o=>({...o,amount:(o.quantity||0)*(o.price||0)}))};E([l,...f]),c(!1),_()},X=()=>{const s=A(a),t={...I,...a,...s,items:a.items.map(l=>({...l,amount:(l.quantity||0)*(l.price||0)}))};E(f.map(l=>l.id===I.id?t:l)),c(!1),z(null),_()},Y=s=>{z(s),x({...s,items:s.items.map(t=>({...t}))}),c(!0)},U=s=>{O(s),p(!0)},J=()=>{E(f.filter(s=>s.id!==C.id)),p(!1),O(null)},_=()=>{x({type:"sales",party:"",partyEmail:"",date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+15*24*60*60*1e3).toISOString().split("T")[0],reference:"",items:[{description:"",quantity:1,price:0,amount:0}],tax_rate:10,notes:"",status:"draft"})},k=(s,t,l)=>{const o=[...a.items];o[s]={...o[s],[t]:l},(t==="quantity"||t==="price")&&(o[s].amount=(o[s].quantity||0)*(o[s].price||0)),x({...a,items:o})},Z=()=>{x({...a,items:[...a.items,{description:"",quantity:1,price:0,amount:0}]})},ee=s=>{if(a.items.length<=1)return;const t=a.items.filter((l,o)=>o!==s);x({...a,items:t})},se=s=>{switch(s){case"paid":return e.jsxs(w,{bg:"success",children:[e.jsx(H,{className:"me-1",size:12})," Paid"]});case"pending":return e.jsxs(w,{bg:"warning",text:"dark",children:[e.jsx(W,{className:"me-1",size:12})," Pending"]});case"overdue":return e.jsxs(w,{bg:"danger",children:[e.jsx(K,{className:"me-1",size:12})," Overdue"]});case"draft":return e.jsx(w,{bg:"secondary",children:"Draft"});default:return e.jsx(w,{bg:"secondary",children:s})}},te=s=>s==="sales"?e.jsx(w,{bg:"primary",children:"Sales"}):e.jsx(w,{bg:"info",children:"Purchase"}),ae=s=>{const t=$.find(l=>l.name===s);x({...a,party:s,partyEmail:(t==null?void 0:t.email)||""})},B=f.reduce((s,t)=>(t.status==="paid"?s.totalPaid+=t.total:t.status==="pending"?s.totalPending+=t.total:t.status==="overdue"&&(s.totalOverdue+=t.total),s),{totalPaid:0,totalPending:0,totalOverdue:0}),F=s=>new Date(s)<new Date;return e.jsxs(ce,{children:[e.jsx(ie,{title:"Invoices Management"}),i.success&&e.jsx(de,{variant:"success",className:"mb-3",children:i.success}),e.jsxs(y,{className:"mb-4",children:[e.jsx(n,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(q,{className:"me-3 text-primary",size:32}),e.jsxs("div",{children:[e.jsx("h4",{className:"fw-semibold mb-1",children:"Invoices Management"}),e.jsx("p",{className:"text-muted mb-0",children:"Manage sales and purchase invoices with automated tracking"})]})]})}),e.jsx(n,{className:"text-end",children:e.jsxs(N,{variant:"primary",className:"px-4",onClick:()=>{z(null),_(),c(!0)},children:[e.jsx(V,{className:"me-2"})," New Invoice"]})})]}),e.jsxs(y,{className:"mb-4",children:[e.jsx(n,{md:3,children:e.jsx(m,{className:"border-0 bg-success bg-opacity-10",children:e.jsx(m.Body,{className:"py-3",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(H,{className:"text-success me-3",size:24}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted small",children:"Total Paid"}),e.jsxs("div",{className:"h5 fw-bold text-success mb-0",children:["$",B.totalPaid.toLocaleString()]})]})]})})})}),e.jsx(n,{md:3,children:e.jsx(m,{className:"border-0 bg-warning bg-opacity-10",children:e.jsx(m.Body,{className:"py-3",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(W,{className:"text-warning me-3",size:24}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted small",children:"Pending"}),e.jsxs("div",{className:"h5 fw-bold text-warning mb-0",children:["$",B.totalPending.toLocaleString()]})]})]})})})}),e.jsx(n,{md:3,children:e.jsx(m,{className:"border-0 bg-danger bg-opacity-10",children:e.jsx(m.Body,{className:"py-3",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(K,{className:"text-danger me-3",size:24}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted small",children:"Overdue"}),e.jsxs("div",{className:"h5 fw-bold text-danger mb-0",children:["$",B.totalOverdue.toLocaleString()]})]})]})})})}),e.jsx(n,{md:3,children:e.jsx(m,{className:"border-0 bg-primary bg-opacity-10",children:e.jsx(m.Body,{className:"py-3",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(oe,{className:"text-primary me-3",size:24}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted small",children:"Total Invoices"}),e.jsx("div",{className:"h5 fw-bold text-primary mb-0",children:f.length})]})]})})})})]}),e.jsx(m,{className:"shadow-sm border-0 mb-4",children:e.jsx(m.Body,{children:e.jsxs(y,{children:[e.jsx(n,{md:6,children:e.jsxs(R,{children:[e.jsx(R.Text,{children:e.jsx(me,{})}),e.jsx(r.Control,{placeholder:"Search by invoice ID, party, reference...",value:h,onChange:s=>T(s.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(xe,{activeKey:v,onSelect:s=>D(s),className:"mb-0",children:[e.jsx(P,{eventKey:"all",title:"All Invoices"}),e.jsx(P,{eventKey:"sales",title:"Sales"}),e.jsx(P,{eventKey:"purchase",title:"Purchases"}),e.jsx(P,{eventKey:"pending",title:"Pending"}),e.jsx(P,{eventKey:"overdue",title:"Overdue"})]})})]})})}),e.jsx(m,{className:"shadow-sm border-0",children:e.jsx(m.Body,{children:e.jsx("div",{className:"table-responsive",children:e.jsxs(ue,{hover:!0,className:"align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Invoice ID"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Party"}),e.jsx("th",{children:"Date / Due"}),e.jsx("th",{className:"text-end",children:"Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:G.length>0?G.map(s=>e.jsxs("tr",{className:F(s.due_date)&&s.status!=="paid"?"table-warning":"",children:[e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:s.id}),e.jsx("small",{className:"text-muted",children:s.reference})]}),e.jsx("td",{children:te(s.type)}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(he,{className:"me-2 text-muted",size:14}),e.jsxs("div",{children:[e.jsx("div",{children:s.party}),e.jsx("small",{className:"text-muted",children:s.partyEmail})]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(pe,{className:"me-2 text-muted",size:14}),e.jsxs("div",{children:[e.jsx("div",{children:s.date}),e.jsxs("small",{className:F(s.due_date)&&s.status!=="paid"?"text-danger":"text-muted",children:["Due:"," ",s.due_date]})]})]})}),e.jsxs("td",{className:"text-end",children:[e.jsxs("div",{className:"fw-semibold",children:["$",s.total.toLocaleString()]}),e.jsxs("small",{className:"text-muted",children:["$",s.amount.toLocaleString()," ","+ $",s.tax.toLocaleString()," ","tax"]})]}),e.jsx("td",{children:se(s.status)}),e.jsx("td",{className:"text-center",children:e.jsxs(b,{children:[e.jsx(b.Toggle,{variant:"outline-primary",size:"sm",id:"dropdown-basic",children:"Actions"}),e.jsxs(b.Menu,{children:[e.jsxs(b.Item,{children:[e.jsx(je,{className:"me-2",size:14}),"View"]}),e.jsxs(b.Item,{onClick:()=>Y(s),children:[e.jsx(ge,{className:"me-2",size:14}),"Edit"]}),e.jsxs(b.Item,{children:[e.jsx(ve,{className:"me-2",size:14}),"Download PDF"]}),e.jsx(b.Divider,{}),e.jsxs(b.Item,{className:"text-danger",onClick:()=>U(s),children:[e.jsx(ye,{className:"me-2",size:14}),"Delete"]})]})]})})]},s.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"text-center text-muted py-4",children:[e.jsx(q,{size:48,className:"mb-2"}),e.jsx("div",{children:"No invoices found"}),e.jsx("small",{children:"Try adjusting your search or create a new invoice"})]})})})]})})})}),e.jsxs(j,{show:u,onHide:()=>c(!1),centered:!0,size:"xl",children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:I?"Edit Invoice":"Create New Invoice"})}),e.jsx(j.Body,{style:{maxHeight:"70vh",overflowY:"auto"},children:e.jsxs(r,{children:[e.jsxs(y,{children:[e.jsx(n,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Invoice Type *"}),e.jsxs(r.Select,{value:a.type,onChange:s=>x({...a,type:s.target.value}),children:[e.jsx("option",{value:"sales",children:"Sales Invoice"}),e.jsx("option",{value:"purchase",children:"Purchase Invoice"})]})]})}),e.jsx(n,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Status"}),e.jsxs(r.Select,{value:a.status,onChange:s=>x({...a,status:s.target.value}),children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"})]})]})})]}),e.jsxs(y,{children:[e.jsx(n,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsxs(r.Label,{children:[a.type==="sales"?"Customer":"Supplier"," ","*"]}),e.jsxs(r.Select,{value:a.party,onChange:s=>ae(s.target.value),children:[e.jsxs("option",{value:"",children:["Select"," ",a.type==="sales"?"Customer":"Supplier"]}),$.filter(s=>s.type===(a.type==="sales"?"customer":"supplier")).map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]})}),e.jsx(n,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Reference"}),e.jsx(r.Control,{value:a.reference,onChange:s=>x({...a,reference:s.target.value}),placeholder:"e.g., PO-001, SO-001"})]})})]}),e.jsxs(y,{children:[e.jsx(n,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Invoice Date *"}),e.jsx(r.Control,{type:"date",value:a.date,onChange:s=>x({...a,date:s.target.value})})]})}),e.jsx(n,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Due Date *"}),e.jsx(r.Control,{type:"date",value:a.due_date,onChange:s=>x({...a,due_date:s.target.value})})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx(r.Label,{className:"fw-semibold",children:"Items"}),e.jsxs(N,{variant:"outline-primary",size:"sm",onClick:Z,children:[e.jsx(V,{size:12,className:"me-1"}),"Add Item"]})]}),a.items.map((s,t)=>e.jsxs("div",{className:"border rounded p-3 mb-2",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("small",{className:"text-muted",children:["Item #",t+1]}),a.items.length>1&&e.jsx(N,{variant:"outline-danger",size:"sm",onClick:()=>ee(t),children:"Remove"})]}),e.jsxs(y,{children:[e.jsx(n,{md:6,children:e.jsxs(r.Group,{className:"mb-2",children:[e.jsx(r.Label,{children:"Description *"}),e.jsx(r.Control,{value:s.description,onChange:l=>k(t,"description",l.target.value),placeholder:"Item description"})]})}),e.jsx(n,{md:2,children:e.jsxs(r.Group,{className:"mb-2",children:[e.jsx(r.Label,{children:"Qty"}),e.jsx(r.Control,{type:"number",value:s.quantity,onChange:l=>k(t,"quantity",parseFloat(l.target.value)||0),min:"1"})]})}),e.jsx(n,{md:2,children:e.jsxs(r.Group,{className:"mb-2",children:[e.jsx(r.Label,{children:"Price"}),e.jsx(r.Control,{type:"number",step:"0.01",value:s.price,onChange:l=>k(t,"price",parseFloat(l.target.value)||0),placeholder:"0.00"})]})}),e.jsx(n,{md:2,children:e.jsxs(r.Group,{className:"mb-2",children:[e.jsx(r.Label,{children:"Amount"}),e.jsx(r.Control,{type:"number",step:"0.01",value:s.amount,readOnly:!0,className:"bg-light"})]})})]})]},t))]}),e.jsxs(y,{children:[e.jsx(n,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Tax Rate (%)"}),e.jsx(r.Control,{type:"number",step:"0.1",value:a.tax_rate,onChange:s=>x({...a,tax_rate:parseFloat(s.target.value)||0})})]})}),e.jsx(n,{md:6,children:e.jsx(m,{className:"bg-light",children:e.jsx(m.Body,{children:e.jsxs(y,{children:[e.jsxs(n,{children:[e.jsx("div",{className:"text-muted",children:"Subtotal:"}),e.jsxs("div",{className:"fw-semibold",children:["$",a.items.reduce((s,t)=>s+(t.amount||0),0).toFixed(2)]})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-muted",children:"Tax:"}),e.jsxs("div",{className:"fw-semibold",children:["$",(a.items.reduce((s,t)=>s+(t.amount||0),0)*(a.tax_rate/100)).toFixed(2)]})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-muted",children:"Total:"}),e.jsxs("div",{className:"h6 fw-bold text-primary",children:["$",(a.items.reduce((s,t)=>s+(t.amount||0),0)*(1+a.tax_rate/100)).toFixed(2)]})]})]})})})})]}),e.jsxs(r.Group,{children:[e.jsx(r.Label,{children:"Notes"}),e.jsx(r.Control,{as:"textarea",rows:3,value:a.notes,onChange:s=>x({...a,notes:s.target.value}),placeholder:"Additional notes or terms..."})]})]})}),e.jsxs(j.Footer,{children:[e.jsx(N,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),e.jsx(N,{variant:"primary",onClick:I?X:Q,children:I?"Update Invoice":"Create Invoice"})]})]}),e.jsxs(j,{show:d,onHide:()=>p(!1),centered:!0,children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:"Confirm Delete"})}),e.jsxs(j.Body,{children:["Are you sure you want to delete invoice"," ",e.jsx("strong",{children:C==null?void 0:C.id}),"?",e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:"This action cannot be undone."})]}),e.jsxs(j.Footer,{children:[e.jsx(N,{variant:"secondary",onClick:()=>p(!1),children:"Cancel"}),e.jsx(N,{variant:"danger",onClick:J,children:"Delete Invoice"})]})]})]})}export{Qe as default};
