import{r as u,j as e,m as W,$ as Q}from"./app-BHgsMdMN.js";import{j as Z}from"./index-C_TLhTie.js";import{e as O,f as ee}from"./index-DlWpVg82.js";import{E as se}from"./ErpLayout-BrY7BVt6.js";import{R as q,I as c,y as p}from"./Footer-D2ooF5pp.js";import{x as k}from"./axios-C1gTDpqO.js";import{S as E}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{u as U}from"./formik.esm-DTi6m-CK.js";import{c as P,d as R,b as z,h as D,a as te,e as ae}from"./index.esm-CWCVgkP0.js";import{M as g}from"./Modal-DO71Vgag.js";import{F as t,C as o}from"./Form-C31rj1ON.js";import{C as w}from"./Card-DbtgvX4L.js";import{B}from"./Image-DXsOGyib.js";import{S as Y}from"./Spinner-C-7Qdq2i.js";import{B as J}from"./ButtonGroup-uLXoY3tg.js";import{T as X}from"./Table-D7zmiFHo.js";import{T as re}from"./Tabs-BD86yGTr.js";import{T as V}from"./Tab-3hVZBwfh.js";import"./iconBase-BMcVOwYX.js";/* empty css                      */import"./CloseButton-qahUCrdS.js";import"./hoist-non-react-statics.cjs-C-Qo8PK8.js";const le=P().shape({name:z().required("Slider name is required").max(255,"Slider name must not exceed 255 characters"),autoplay_speed:R().integer("Must be an integer").min(500,"Minimum autoplay speed is 500ms"),slides_to_show:R().integer("Must be an integer").min(1,"Minimum slides to show is 1"),slides_to_scroll:R().integer("Must be an integer").min(1,"Minimum slides to scroll is 1")});function ie({showModal:h,setShowModal:f,formData:r,handleInputChange:j,handleSubmit:l,isSubmitting:i,sliderTypes:s}){const a=U({initialValues:{id:"",name:"",type:"default",is_active:!0,autoplay:!0,arrows:!0,dots:!1,infinite:!0,autoplay_speed:3e3,slides_to_show:1,slides_to_scroll:1,breakpoints:null,custom_settings:null},validationSchema:le,enableReinitialize:!0,onSubmit:b=>{const m={...b,breakpoints:b.breakpoints?JSON.parse(b.breakpoints):null,custom_settings:b.custom_settings?JSON.parse(b.custom_settings):null};l(m)}});return u.useEffect(()=>{r&&a.setValues({...r,breakpoints:r.breakpoints?JSON.stringify(r.breakpoints,null,2):"",custom_settings:r.custom_settings?JSON.stringify(r.custom_settings,null,2):"",is_active:r.is_active!==void 0?r.is_active:!0,autoplay:r.autoplay!==void 0?r.autoplay:!0,arrows:r.arrows!==void 0?r.arrows:!0,dots:r.dots!==void 0?r.dots:!1,infinite:r.infinite!==void 0?r.infinite:!0})},[r]),e.jsx(g,{centered:!0,show:h,onHide:()=>{i||(f(!1),a.resetForm())},backdrop:i?"static":!0,keyboard:!i,size:"lg",children:e.jsxs(t,{onSubmit:a.handleSubmit,noValidate:!0,children:[e.jsx(g.Header,{closeButton:!i,children:e.jsx(g.Title,{children:r.id?"Edit Slider":"Create Slider"})}),e.jsx(g.Body,{children:e.jsxs(q,{className:"g-3 mb-3",children:[e.jsx(o,{md:12,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsxs(t.Label,{children:["Slider Name"," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-sliders"})}),e.jsx(t.Control,{type:"text",name:"name",value:a.values.name,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.name&&!!a.errors.name,disabled:i,required:!0}),e.jsx(t.Control.Feedback,{type:"invalid",children:a.errors.name})]})]})}),e.jsx(o,{md:4,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Autoplay Speed (ms)"}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-speedometer2"})}),e.jsx(t.Control,{type:"number",name:"autoplay_speed",min:"500",step:"500",value:a.values.autoplay_speed,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.autoplay_speed&&!!a.errors.autoplay_speed,disabled:i}),e.jsx(t.Control.Feedback,{type:"invalid",children:a.errors.autoplay_speed})]})]})}),e.jsx(o,{md:4,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Slides To Show"}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-collection"})}),e.jsx(t.Control,{type:"number",name:"slides_to_show",min:"1",value:a.values.slides_to_show,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.slides_to_show&&!!a.errors.slides_to_show,disabled:i}),e.jsx(t.Control.Feedback,{type:"invalid",children:a.errors.slides_to_show})]})]})}),e.jsx(o,{md:4,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Slides To Scroll"}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-arrow-left-right"})}),e.jsx(t.Control,{type:"number",name:"slides_to_scroll",min:"1",value:a.values.slides_to_scroll,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.slides_to_scroll&&!!a.errors.slides_to_scroll,disabled:i}),e.jsx(t.Control.Feedback,{type:"invalid",children:a.errors.slides_to_scroll})]})]})}),e.jsx(o,{md:12,children:e.jsx(w,{className:"border-0 shadow-sm",children:e.jsxs(w.Body,{children:[e.jsx(w.Title,{children:"Slider Controls"}),e.jsxs(q,{children:[e.jsx(o,{md:6,lg:3,children:e.jsx(t.Check,{type:"switch",id:"autoplay",name:"autoplay",label:"Autoplay",checked:a.values.autoplay,onChange:a.handleChange,disabled:i})}),e.jsx(o,{md:6,lg:3,children:e.jsx(t.Check,{type:"switch",id:"arrows",name:"arrows",label:"Arrows",checked:a.values.arrows,onChange:a.handleChange,disabled:i})}),e.jsx(o,{md:6,lg:3,children:e.jsx(t.Check,{type:"switch",id:"dots",name:"dots",label:"Pagination Dots",checked:a.values.dots,onChange:a.handleChange,disabled:i})}),e.jsx(o,{md:6,lg:3,children:e.jsx(t.Check,{type:"switch",id:"infinite",name:"infinite",label:"Infinite Loop",checked:a.values.infinite,onChange:a.handleChange,disabled:i})}),e.jsx(o,{md:6,lg:3,children:e.jsx(t.Check,{type:"switch",id:"is_active",name:"is_active",label:"Active",checked:a.values.is_active,onChange:a.handleChange,disabled:i})})]})]})})})]})}),e.jsxs(g.Footer,{children:[e.jsx(B,{variant:"outline-danger",onClick:()=>{f(!1),a.resetForm()},disabled:i,children:"Cancel"}),e.jsx(B,{variant:"outline-light",type:"submit",disabled:i||!a.isValid,children:i?e.jsxs(e.Fragment,{children:[e.jsx(Y,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),e.jsx("span",{className:"ms-2",children:r.id?"Updating...":"Creating..."})]}):r.id?"Update":"Create"})]})]})})}const H=()=>({id:"",name:"",type:"",description:"",is_active:!1,start_date:"",end_date:"",order:0,image:null});function ne({showSlider:h,onSuccess:f}){const[r,j]=u.useState(!1),[l,i]=u.useState(H()),[s,a]=u.useState(!1),[b,m]=u.useState([]),N=u.useCallback(()=>{const d=$("#slidesTable").DataTable();d&&d.ajax.reload(null,!1)},[]),S=u.useCallback(()=>{$.fn.DataTable.isDataTable("#slidesTable")&&$("#slidesTable").DataTable().destroy(),$("#slidesTable").DataTable({processing:!0,serverSide:!0,ajax:{url:route("slider.index"),type:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}},columns:[{data:"DT_RowIndex",name:"DT_RowIndex",title:"#",orderable:!1,searchable:!1,width:"5%"},{data:"name",name:"name",title:"Slider",className:"text-capitalize"},{data:"type",name:"type",title:"Type"},{data:"items_count",name:"items_count",title:"Item Count"},{data:"status",name:"status",title:"Status"},{data:"action",name:"action",title:"Actions",orderable:!1,searchable:!1,width:"15%"}],drawCallback:function(d){$(".items-btn").off("click").on("click",function(){const n=$(this).data("id");x(n)}),$(".edit-btn").off("click").on("click",function(){const n=$(this).data("id");T(n)}),$(".delete-btn").off("click").on("click",function(){const n=$(this).data("id");I(n)})}})},[]),G=d=>{const{name:n,value:y,type:C,checked:v}=d.target;i(L=>({...L,[n]:C==="checkbox"?v:y}))},A=d=>{i(n=>({...n,image:d.target.files[0]}))},_=()=>{i(H()),j(!0)},x=async d=>{try{const n=await k.get(route("slider.edit",d));n.data.success===!0&&h(n.data.slider)}catch{p.error("An error occurred while fetching the slide items.")}},T=async d=>{try{const n=await k.get(route("slider.edit",d));n.data.success===!0&&(i({...n.data.slider,is_active:!!n.data.slider.is_active}),j(!0))}catch{p.error("An error occurred while fetching the slide.")}},I=async d=>{if((await E.fire({title:"Delete Slide?",text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{const y=await k.delete(route("slider.destroy",d));y.data.success?(p.success(y.data.message),N()):p.error(y.data.message)}catch{p.error("An error occurred while deleting the slider.")}},F=async d=>{const n=!!d.id;if((await E.fire({title:n?"Update slide?":"Create slide?",text:n?"Are you sure you want to update this slide?":"Are you sure you want to create a new slide?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:n?"Yes, update it!":"Yes, create it!"})).isConfirmed)try{const C=new FormData;Object.entries(d).forEach(([K,M])=>{M!=null&&C.append(K,M)}),n&&C.append("_method","put");const v=n?route("slider.update",d.id):route("slider.store"),L=await k.post(v,C,{headers:{"Content-Type":"multipart/form-data"}});L.data.success===!0&&(p.success(L.data.message),j(!1),N())}catch{p.error("An error occurred while processing the request.")}finally{a(!1)}};return u.useEffect(()=>(S(),()=>{$.fn.DataTable.isDataTable("#slidesTable")&&$("#slidesTable").DataTable().destroy()}),[S]),e.jsxs(e.Fragment,{children:[e.jsxs(w,{className:"border-0 rounded-0 shadow-sm",children:[e.jsxs(w.Header,{className:"d-flex justify-content-between align-items-center bg-transparent",children:[e.jsx("h6",{className:"mb-0 fw-semibold",children:"Slides Management"}),e.jsx(J,{children:e.jsxs(B,{variant:"outline-secondary",size:"sm",className:"rounded-1 d-flex align-items-center",onClick:_,children:[e.jsx(O,{className:"me-1"}),"New Slides"]})})]}),e.jsx(w.Body,{className:"px-0",children:e.jsx(X,{bordered:!0,striped:!0,hover:!0,responsive:!0,id:"slidesTable",className:"w-100"})})]}),e.jsx(ie,{showModal:r,setShowModal:j,formData:l,handleInputChange:G,handleFileChange:A,handleSubmit:F,isSubmitting:s,sliders:b})]})}const de=P().shape({title:z().max(255,"Title must not exceed 255 characters"),subtitle:z().max(255,"Subtitle must not exceed 255 characters"),image:te().nullable().test("is-required","Desktop image is required",function(h){return this.parent.id||h}),start_at:D().nullable(),end_at:D().nullable().min(ae("start_at"),"End date must be after start date")});function oe({showModal:h,setShowModal:f,formData:r,handleSubmit:j,isSubmitting:l}){const i=u.useMemo(()=>({id:"",slider_id:"",title:"",subtitle:"",description:"",image:null,mobile_image:null,button_text:"",button_url:"",secondary_button_text:"",secondary_button_url:"",order:0,is_active:!0,text_color:"#ffffff",start_at:"",end_at:""}),[]),s=U({initialValues:i,validationSchema:de,enableReinitialize:!0,onSubmit:m=>{j(m)}});u.useEffect(()=>{r&&h&&s.setValues({...i,...r,is_active:r.is_active!==void 0?r.is_active:!0})},[r,h]);const a=(m,N)=>{s.setFieldValue(N,m.target.files[0])},b=()=>{l||(f(!1),setTimeout(()=>{s.resetForm()},300))};return e.jsx(g,{centered:!0,show:h,onHide:b,backdrop:l?"static":!0,keyboard:!l,size:"lg",children:e.jsxs(t,{onSubmit:s.handleSubmit,noValidate:!0,children:[e.jsx(g.Header,{closeButton:!l,children:e.jsx(g.Title,{children:s.values.id?"Edit Slide Item":"Create Slide Item"})}),e.jsx(g.Body,{children:e.jsxs(q,{className:"g-3",children:[e.jsx(o,{md:12,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Title"}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-text-paragraph"})}),e.jsx(t.Control,{type:"text",name:"title",value:s.values.title,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.title&&!!s.errors.title,disabled:l}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.title})]})]})}),e.jsx(o,{md:12,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Subtitle"}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-text-center"})}),e.jsx(t.Control,{type:"text",name:"subtitle",value:s.values.subtitle,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.subtitle&&!!s.errors.subtitle,disabled:l}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.subtitle})]})]})}),e.jsx(o,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsxs(t.Label,{children:["Desktop Image"," ",!s.values.id&&e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(t.Control,{type:"file",name:"image",accept:"image/*",onChange:m=>a(m,"image"),onBlur:s.handleBlur,isInvalid:s.touched.image&&!!s.errors.image,disabled:l}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.image}),s.values.image&&typeof s.values.image=="string"&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:`/${s.values.image}`,alt:"Current",className:"img-thumbnail",width:100})})]})}),e.jsx(o,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Mobile Image"}),e.jsx(t.Control,{type:"file",name:"mobile_image",accept:"image/*",onChange:m=>a(m,"mobile_image"),onBlur:s.handleBlur,isInvalid:s.touched.mobile_image&&!!s.errors.mobile_image,disabled:l}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.mobile_image}),s.values.mobile_image&&typeof s.values.mobile_image=="string"&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:`/${s.values.mobile_image}`,alt:"Mobile Preview",className:"img-thumbnail",style:{maxHeight:"150px"}})})]})}),e.jsx(o,{md:3,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Primary Button Text"}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-button-play"})}),e.jsx(t.Control,{type:"text",name:"button_text",value:s.values.button_text,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.button_text&&!!s.errors.button_text,disabled:l}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.button_text})]})]})}),e.jsx(o,{md:3,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Primary Button URL"}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-link-45deg"})}),e.jsx(t.Control,{type:"url",name:"button_url",value:s.values.button_url,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.button_url&&!!s.errors.button_url,disabled:l,placeholder:"https://example.com"}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.button_url})]})]})}),e.jsx(o,{md:3,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Secondary Button Text"}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-button-play"})}),e.jsx(t.Control,{type:"text",name:"secondary_button_text",value:s.values.secondary_button_text,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.secondary_button_text&&!!s.errors.secondary_button_text,disabled:l}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.secondary_button_text})]})]})}),e.jsx(o,{md:3,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Secondary Button URL"}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-link-45deg"})}),e.jsx(t.Control,{type:"url",name:"secondary_button_url",value:s.values.secondary_button_url,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.secondary_button_url&&!!s.errors.secondary_button_url,disabled:l,placeholder:"https://example.com"}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.secondary_button_url})]})]})}),e.jsx(o,{md:3,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Order"}),e.jsxs(c,{children:[e.jsx(c.Text,{children:e.jsx("i",{className:"bi bi-sort-numeric-down"})}),e.jsx(t.Control,{type:"number",name:"order",min:"0",value:s.values.order,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.order&&!!s.errors.order,disabled:l}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.order})]})]})}),e.jsx(o,{md:3,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Text Color"}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(t.Control,{type:"color",name:"text_color",value:s.values.text_color,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.text_color&&!!s.errors.text_color,style:{width:"60px",height:"38px",padding:"3px"},disabled:l}),e.jsx(t.Control,{type:"text",name:"text_color",value:s.values.text_color,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.text_color&&!!s.errors.text_color,disabled:l})]}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.text_color})]})}),e.jsx(o,{md:3,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Start Date/Time"}),e.jsx(t.Control,{type:"datetime-local",name:"start_at",value:s.values.start_at,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.start_at&&!!s.errors.start_at,disabled:l}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.start_at})]})}),e.jsx(o,{md:3,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"End Date/Time"}),e.jsx(t.Control,{type:"datetime-local",name:"end_at",value:s.values.end_at,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:s.touched.end_at&&!!s.errors.end_at,min:s.values.start_at,disabled:l}),e.jsx(t.Control.Feedback,{type:"invalid",children:s.errors.end_at})]})}),e.jsx(o,{md:12,children:e.jsx(t.Group,{className:"mb-3",children:e.jsx(t.Check,{type:"switch",id:"is_active",name:"is_active",label:"Active",checked:s.values.is_active,onChange:s.handleChange,disabled:l})})})]})}),e.jsxs(g.Footer,{children:[e.jsx(B,{variant:"outline-secondary",onClick:b,disabled:l,children:"Cancel"}),e.jsx(B,{variant:"primary",type:"submit",disabled:l||!s.isValid,children:l?e.jsxs(e.Fragment,{children:[e.jsx(Y,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),s.values.id?"Updating...":"Creating..."]}):s.values.id?"Update":"Create"})]})]})})}function ce({slider:h}){const[f,r]=u.useState(!1),[j,l]=u.useState({slider_id:h.id}),[i,s]=u.useState(!1),[a,b]=u.useState(null),m=u.useCallback(()=>{$.fn.DataTable.isDataTable("#sliderItemsTable")&&(a==null||a.destroy());const _=$("#sliderItemsTable").DataTable({processing:!0,serverSide:!0,ajax:{url:route("slider-item.index",{slider:h.id}),type:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}},columns:[{data:"DT_RowIndex",name:"DT_RowIndex",title:"#",orderable:!1,searchable:!1,width:"5%"},{data:"image_preview",name:"image_preview",title:"Image"},{data:"title",name:"title",title:"Title"},{data:"subtitle",name:"subtitle",title:"Sub Title"},{data:"status_badge",name:"status_badge",title:"Status"},{data:"order",name:"order",title:"Order"},{data:"action",name:"action",title:"Actions",className:"text-end",orderable:!1,searchable:!1,width:"10%"}],drawCallback:function(){$("#sliderItemsTable").off("click",".view-item-btn").on("click",".view-item-btn",function(){window.location.href=route("slider-item.show",$(this).data("id"))}),$("#sliderItemsTable").off("click",".edit-item-btn").on("click",".edit-item-btn",function(){const x=$(this).data("id");S(x)}),$("#sliderItemsTable").off("click",".delete-item-btn").on("click",".delete-item-btn",function(){const x=$(this).data("id");G(x)})}});b(_)},[h.id]),N=()=>{l({slider_id:h.id}),r(!0)},S=async _=>{try{const x=await k.get(route("slider-item.edit",_));l({...x.data,is_active:!!x.data.is_active,slider_id:h.id}),r(!0)}catch{p.error("An error occurred while fetching the slider item.")}},G=async _=>{if((await E.fire({title:"Delete Slider Item?",text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{const T=await k.delete(route("slider-item.destroy",_));T.data.success?(p.success(T.data.message),a==null||a.ajax.reload(null,!1)):p.error(T.data.message)}catch{p.error("An error occurred while deleting the slider item.")}},A=async _=>{var I,F;const x=!!_.id;if((await E.fire({title:x?"Update slider item?":"Create slider item?",text:x?"Are you sure you want to update this slider item?":"Are you sure you want to create a new slider item?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:x?"Yes, update it!":"Yes, create it!"})).isConfirmed){s(!0);try{const d=new FormData;Object.entries(_).forEach(([C,v])=>{v!=null&&(typeof v=="boolean"?d.append(C,v?1:0):d.append(C,v))}),x&&d.append("_method","put");const n=x?route("slider-item.update",_.id):route("slider-item.store"),y=await k.post(n,d,{headers:{"Content-Type":"multipart/form-data"}});y.data.success===!0&&(p.success(y.data.message),r(!1),a==null||a.ajax.reload(null,!1))}catch(d){console.error("Submission error:",d),p.error(((F=(I=d.response)==null?void 0:I.data)==null?void 0:F.message)||"An error occurred while processing the request.")}finally{s(!1)}}};return u.useEffect(()=>(m(),()=>{a&&a.destroy()}),[m]),e.jsxs(e.Fragment,{children:[e.jsxs(w,{className:"border-0 rounded-0 shadow-sm",children:[e.jsxs(w.Header,{className:"d-flex justify-content-between align-items-center bg-transparent",children:[e.jsx("h6",{className:"mb-0 fw-semibold",children:h==null?void 0:h.name}),e.jsx(J,{children:e.jsxs(B,{variant:"outline-primary",size:"sm",className:"rounded-1 d-flex align-items-center",onClick:N,children:[e.jsx(O,{className:"me-1"}),"New Slide Item"]})})]}),e.jsx(w.Body,{className:"px-0",children:e.jsx("div",{className:"table-responsive",children:e.jsx(X,{bordered:!0,striped:!0,hover:!0,id:"sliderItemsTable",className:"w-100"})})})]}),e.jsx(oe,{showModal:f,setShowModal:r,formData:j,handleSubmit:A,isSubmitting:i})]})}function Le(){const[h,f]=u.useState("sliders"),[r,j]=u.useState(null),[l,i]=u.useState(!1),s=u.useCallback(m=>{f(m),m!=="slider-items"&&(i(!1),j(null))},[]),a=u.useCallback(m=>{f("slider-items"),i(!0),j(m)},[]),b=u.useCallback(()=>{f("sliders"),W.reload()},[]);return e.jsxs(se,{children:[e.jsx(Q,{title:"Slides Management"}),e.jsxs(re,{activeKey:h,onSelect:s,className:"users-tabs mb-3",id:"slides-management-tabs",children:[e.jsx(V,{eventKey:"sliders",title:e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:16,className:"me-1"})," Sliders"]}),children:e.jsx(ne,{showSlider:a})}),l&&e.jsx(V,{eventKey:"slider-items",title:e.jsxs(e.Fragment,{children:[e.jsx(ee,{size:16,className:"me-1"})," ",r==null?void 0:r.name]}),disabled:!l,children:r?e.jsx(ce,{slider:r,onSuccess:b}):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{children:"Please select a slider to view"})})})]})]})}export{Le as default};
