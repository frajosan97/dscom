import{r as f,R as d,j as t,$ as re,Y as H}from"./app-Bf6XjMin.js";import{F as le}from"./index-Bpn9xGpQ.js";import{S as O}from"./hoist-non-react-statics.cjs-CiIQoDaf.js";import{P as i,R as C,y as ae,I as F}from"./Footer-KcMd7B25.js";import{E as ne}from"./ErpLayout-CcqoWY3M.js";import{f as A,a as ie}from"./helpers-BvGx6l4I.js";import{M as g}from"./Modal-Dub380aG.js";import{F as x,C as v}from"./Form-CBfDXdOv.js";import{P as G}from"./person-CeukILo8.js";import{B as b,C as oe}from"./Image-SIlH0Fxf.js";import{J as ce}from"./journal-CfuiZkC7.js";import{C as de}from"./CustomerModal-BVirOe0I.js";import{x as me}from"./axios-DHJzAa6P.js";import{u as ue}from"./useErrorToast-B3ZDums2.js";import{B as k}from"./ButtonGroup-D-fEBcFe.js";import{P as he}from"./pencil-C4T-rFLR.js";import{C as p}from"./Card-BnYslkqX.js";import{B as z}from"./Badge-CKPVm74Y.js";import{L as y}from"./ListGroup-D6egMCVh.js";import{C as fe}from"./calendar-CpKfKrsL.js";import{S as pe}from"./star-DZE0uirJ.js";import{T as xe}from"./Tabs-QYV2KLVt.js";import{T as $}from"./Tab-DJN0NYNc.js";import{S as be}from"./search-DSGSobsf.js";import{T as ve}from"./Table-C6uxQ5h8.js";import{E as je}from"./eye-CXyxoW2C.js";import"./iconBase-Ci6cckdQ.js";import"./CloseButton-C4urQvqy.js";/* empty css                      */import"./formik.esm-mxnt_q6J.js";import"./index.esm-CBUoSnSW.js";var ge=["color","size","title","className"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},S.apply(null,arguments)}function ye(e,l){if(e==null)return{};var r,s,a=we(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],l.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function we(e,l){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(l.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var V=f.forwardRef(function(e,l){var r=e.color,s=r===void 0?"currentColor":r,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=ye(e,ge);return d.createElement("svg",S({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:s,className:["bi","bi-arrow-left",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"}))});V.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Ne=["color","size","title","className"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_.apply(null,arguments)}function Oe(e,l){if(e==null)return{};var r,s,a=Ce(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],l.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ce(e,l){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(l.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var K=f.forwardRef(function(e,l){var r=e.color,s=r===void 0?"currentColor":r,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=Oe(e,Ne);return d.createElement("svg",_({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:s,className:["bi","bi-cash-coin",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{fillRule:"evenodd",d:"M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8m5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0"}),d.createElement("path",{d:"M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195z"}),d.createElement("path",{d:"M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083q.088-.517.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1z"}),d.createElement("path",{d:"M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 6 6 0 0 1 3.13-1.567"}))});K.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Pe=["color","size","title","className"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},E.apply(null,arguments)}function $e(e,l){if(e==null)return{};var r,s,a=ze(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],l.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ze(e,l){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(l.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var Y=f.forwardRef(function(e,l){var r=e.color,s=r===void 0?"currentColor":r,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=$e(e,Pe);return d.createElement("svg",E({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:s,className:["bi","bi-chat",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105"}))});Y.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Se=["color","size","title","className"];function T(){return T=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},T.apply(null,arguments)}function _e(e,l){if(e==null)return{};var r,s,a=Ee(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],l.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ee(e,l){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(l.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var D=f.forwardRef(function(e,l){var r=e.color,s=r===void 0?"currentColor":r,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=_e(e,Se);return d.createElement("svg",T({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:s,className:["bi","bi-envelope",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z"}))});D.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Te=["color","size","title","className"];function B(){return B=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},B.apply(null,arguments)}function Be(e,l){if(e==null)return{};var r,s,a=Me(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],l.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Me(e,l){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(l.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var J=f.forwardRef(function(e,l){var r=e.color,s=r===void 0?"currentColor":r,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=Be(e,Te);return d.createElement("svg",B({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:s,className:["bi","bi-geo-alt",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A32 32 0 0 1 8 14.58a32 32 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10"}),d.createElement("path",{d:"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6"}))});J.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Le=["color","size","title","className"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},M.apply(null,arguments)}function Ie(e,l){if(e==null)return{};var r,s,a=Ae(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],l.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ae(e,l){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(l.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var Q=f.forwardRef(function(e,l){var r=e.color,s=r===void 0?"currentColor":r,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=Ie(e,Le);return d.createElement("svg",M({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:s,className:["bi","bi-phone",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M11 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),d.createElement("path",{d:"M8 14a1 1 0 1 0 0-2 1 1 0 0 0 0 2"}))});Q.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Re=["color","size","title","className"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},L.apply(null,arguments)}function We(e,l){if(e==null)return{};var r,s,a=He(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],l.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function He(e,l){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(l.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var U=f.forwardRef(function(e,l){var r=e.color,s=r===void 0?"currentColor":r,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=We(e,Re);return d.createElement("svg",L({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:s,className:["bi","bi-telephone-fill",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{fillRule:"evenodd",d:"M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z"}))});U.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Fe=["color","size","title","className"];function I(){return I=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},I.apply(null,arguments)}function ke(e,l){if(e==null)return{};var r,s,a=Ge(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],l.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ge(e,l){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(l.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var q=f.forwardRef(function(e,l){var r=e.color,s=r===void 0?"currentColor":r,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=ke(e,Fe);return d.createElement("svg",I({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:s,className:["bi","bi-telephone",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z"}))});q.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};const Ve=({showCallModal:e,setShowCallModal:l,customer:r,callDetails:s,setCallDetails:a,handleCallSubmit:n,handleCallNow:o})=>{const c=[[{label:"1",sub:"♾️"},{label:"2",sub:"ABC"},{label:"3",sub:"DEF"}],[{label:"4",sub:"GHI"},{label:"5",sub:"JKL"},{label:"6",sub:"MNO"}],[{label:"7",sub:"PQRS"},{label:"8",sub:"TUV"},{label:"9",sub:"WXYZ"}],[{label:"*",sub:""},{label:"0",sub:"+"},{label:"#",sub:""}]],m=u=>{a({...s,phoneNumber:s.phoneNumber+u})};return t.jsxs(g,{show:e,centered:!0,onHide:()=>l(!1),children:[t.jsx(g.Header,{className:"border-0 py-1",closeButton:!0,children:t.jsx(g.Title,{children:"Call Customer"})}),t.jsx(x,{onSubmit:n,children:t.jsxs(g.Body,{className:"border-0",children:[t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2",style:{width:"80px",height:"80px"},children:t.jsx(G,{size:40,className:"text-white"})})}),t.jsxs("div",{className:"mb-3",children:[t.jsx(x.Label,{className:"visually-hidden",children:"Phone Number"}),t.jsx(x.Control,{type:"text",value:s.phoneNumber,onChange:u=>a({...s,phoneNumber:u.target.value.replace(/\D/g,"")}),className:"text-center py-3 fs-5",placeholder:"Enter phone number"})]}),t.jsxs("div",{className:"keypad",children:[c.map((u,h)=>t.jsx(C,{className:"g-1 mb-1",children:u.map(w=>t.jsx(v,{xs:4,children:t.jsxs(b,{variant:"outline-light",className:"w-100 d-flex flex-column border text-dark",onClick:()=>m(w.label),children:[t.jsx("span",{className:"fs-5 mb-0",children:w.label}),w.sub&&t.jsx("small",{className:"text-muted",children:w.sub})]})},w.label))},h)),t.jsxs(C,{className:"g-2",children:[t.jsx(v,{xs:4,children:t.jsx(b,{variant:"outline-secondary",className:"w-100 py-2",onClick:()=>a({...s,phoneNumber:s.phoneNumber.slice(0,-1)}),children:t.jsx(V,{size:24})})}),t.jsx(v,{xs:4,children:t.jsxs(b,{variant:"success",className:"w-100 py-2",onClick:o,disabled:!s.phoneNumber,children:[t.jsx(U,{size:24}),t.jsx("span",{className:"ms-1",children:"Call"})]})}),t.jsx(v,{xs:4,children:t.jsxs(b,{variant:"outline-primary",className:"w-100 py-2",type:"submit",children:[t.jsx(ce,{size:24}),t.jsx("span",{className:"ms-1",children:"Log"})]})})]})]})]})})]})},Ke=({showSendSmsModal:e,setShowSendSmsModal:l,customer:r,smsDetails:s,setSmsDetails:a,handleSmsSubmit:n})=>t.jsxs(g,{show:e,onHide:()=>l(!1),centered:!0,children:[t.jsx(g.Header,{closeButton:!0,children:t.jsx(g.Title,{children:"Send Message"})}),t.jsxs(x,{onSubmit:n,children:[t.jsxs(g.Body,{className:"border-0",children:[t.jsxs(x.Group,{className:"mb-3",children:[t.jsx(x.Label,{children:"Phone Number"}),t.jsx(x.Control,{type:"text",value:s.phoneNumber,onChange:o=>a({...s,phoneNumber:o.target.value.replace(/\D/g,"")}),placeholder:"Enter phone number"})]}),t.jsxs(x.Group,{className:"mb-3",children:[t.jsx(x.Label,{children:"Message"}),t.jsx(x.Control,{as:"textarea",rows:4,value:s.message,onChange:o=>a({...s,message:o.target.value}),placeholder:"Type your message here..."})]})]}),t.jsxs(g.Footer,{children:[t.jsx(b,{variant:"primary",type:"submit",disabled:!s.phoneNumber||!s.message,children:"Send Message"}),t.jsx(b,{variant:"secondary",onClick:()=>l(!1),children:"Cancel"})]})]})]});function $t({customer:e}){const{showErrorToast:l}=ue(),[r,s]=f.useState("overview"),[a,n]=f.useState(!1),[o,c]=f.useState(!1),[m,u]=f.useState(!1),[h,w]=f.useState({phoneNumber:e.phone||"",callType:"outgoing",notes:"",duration:"",status:"completed"}),[W,X]=f.useState({customerId:e.id,phoneNumber:(e==null?void 0:e.phone)||"",message:""}),Z=N=>{switch(N){case"retail":return"info";case"wholesale":return"warning";case"corporate":return"success";default:return"secondary"}},ee=async N=>{if(N.preventDefault(),!!(await O.fire({title:"Send SMS?",text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, send it!"})).isConfirmed){O.fire({title:"Sending SMS...",allowOutsideClick:!1,didOpen:()=>O.showLoading()});try{const P=await me.post(route("send-sms"),W);P.data.success&&ae.success(P.data.message)}catch(P){l(P)}finally{O.close(),c(!1)}}},te=async N=>{N.preventDefault(),(await O.fire({title:"Call Now?",text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, call!"})).isConfirmed&&(e!=null&&e.phone?window.location.href=`tel:${e.phone}`:O.fire("Error","No phone number available.","error"))};return t.jsxs(ne,{children:[t.jsx(re,{title:`Customer - ${e.full_name}`}),t.jsxs(oe,{fluid:!0,className:"py-4",children:[t.jsxs(C,{className:"mb-4",children:[t.jsxs(v,{children:[t.jsx("h3",{className:"fw-bold text-primary text-capitalize",children:e==null?void 0:e.full_name}),t.jsx("p",{className:"text-muted mb-0",children:"Managing the customer account"})]}),t.jsx(v,{className:"text-end",children:t.jsxs(k,{className:"gap-2",children:[t.jsxs(b,{variant:"outline-secondary",as:H,href:route("customers.index"),className:"rounded",children:[t.jsx(le,{className:"me-1"})," Back"]}),t.jsxs(b,{variant:"outline-primary",as:H,href:route("customers.edit",e.id),className:"rounded",children:[t.jsx(he,{className:"me-1"})," Edit"]})]})})]}),t.jsx(p,{children:t.jsx(p.Body,{children:t.jsxs(C,{children:[t.jsxs(v,{md:4,lg:3,children:[t.jsx(p,{className:"border-0 shadow-sm mb-3",children:t.jsxs(p.Body,{className:"text-center p-4",children:[t.jsx("div",{className:"mb-3",children:e!=null&&e.profile_image_url?t.jsx("img",{src:e.profile_image_url,alt:"Profile",className:"rounded-circle",style:{width:"100px",height:"100px",objectFit:"cover"}}):t.jsx("div",{className:"bg-light rounded-circle d-flex align-items-center justify-content-center mx-auto",style:{width:"100px",height:"100px"},children:t.jsx(G,{size:40})})}),t.jsxs("h5",{className:"fw-bold mb-1",children:[e.first_name," ",e.last_name]}),t.jsx(z,{bg:Z(e.customer_type),className:"text-capitalize mb-2",children:e.customer_type}),t.jsxs("div",{className:"d-flex justify-content-center mb-3",children:[t.jsx(z,{bg:e.is_active?"success":"secondary",className:"me-2",children:e.is_active?"Active":"Inactive"}),t.jsx(z,{bg:e.is_verified?"info":"warning",children:e.is_verified?"Verified":"Unverified"})]}),t.jsxs(y,{variant:"flush",className:"text-start",children:[t.jsxs(y.Item,{className:"px-0 d-flex align-items-center",children:[t.jsx(D,{className:"text-muted me-2"}),e.email||"N/A"]}),t.jsxs(y.Item,{className:"px-0 d-flex align-items-center",children:[t.jsx(q,{className:"text-muted me-2"}),e.phone||"N/A"]}),t.jsxs(y.Item,{className:"px-0 d-flex align-items-center",children:[t.jsx(J,{className:"text-muted me-2"}),e.city?`${e.city}, ${e.state}`:"Location not specified"]}),t.jsxs(y.Item,{className:"px-0 d-flex align-items-center",children:[t.jsx(fe,{className:"text-muted me-2"}),"Joined:"," ",A(e.created_at)]})]})]})}),t.jsxs(p,{className:"border-0 shadow-sm mb-3",children:[t.jsx(p.Header,{className:"bg-white fw-semibold",children:"Account Summary"}),t.jsxs(p.Body,{children:[t.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[t.jsxs("span",{children:[t.jsx(pe,{className:"text-warning me-2"}),"Loyalty Points"]}),t.jsx("span",{className:"fw-bold",children:e.loyalty_points||0})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsxs("span",{children:[t.jsx(K,{className:"text-success me-2"}),"Balance"]}),t.jsx("span",{className:"fw-bold",children:ie(e.balance)})]})]})]}),t.jsxs(p,{className:"border-0 shadow-sm",children:[t.jsx(p.Header,{className:"bg-white fw-semibold",children:"Quick Actions"}),t.jsx(p.Body,{children:t.jsxs(k,{className:"d-grid gap-2",children:[t.jsxs(b,{variant:"outline-primary",className:"text-start rounded-pill",onClick:()=>n(!0),children:[t.jsx(Q,{})," Call Customer"]}),t.jsxs(b,{variant:"outline-primary",className:"text-start rounded-pill",onClick:()=>c(!0),children:[t.jsx(Y,{})," Send Message"]})]})})]})]}),t.jsx(v,{md:8,lg:9,children:t.jsx(p,{className:"border-0 shadow-sm",children:t.jsx(p.Body,{className:"p-0",children:t.jsxs(xe,{activeKey:r,onSelect:N=>s(N),className:"px-3 pt-3",children:[t.jsx($,{eventKey:"overview",title:"Overview",children:t.jsx(Ye,{customer:e})}),t.jsx($,{eventKey:"orders",title:"Orders",children:t.jsx(De,{customer:e})}),t.jsx($,{eventKey:"services",title:"Services",children:t.jsx(Je,{customer:e})}),t.jsx($,{eventKey:"payments",title:"Payments",children:t.jsx(Qe,{customer:e})})]})})})})]})})})]}),t.jsx(Ve,{showCallModal:a,setShowCallModal:n,customer:e,callDetails:h,setCallDetails:w,handleCallNow:te}),t.jsx(Ke,{showSendSmsModal:o,setShowSendSmsModal:c,customer:e,smsDetails:W,setSmsDetails:X,handleSmsSubmit:ee}),t.jsx(de,{show:m,customer:e,onHide:()=>u(!1)})]})}const Ye=({customer:e})=>t.jsx("div",{className:"p-3",children:t.jsxs(C,{children:[t.jsxs(v,{md:6,children:[t.jsx("h6",{className:"fw-semibold mb-3",children:"Personal Information"}),t.jsxs(y,{variant:"flush",children:[t.jsx(j,{label:"Full Name",value:e.full_name}),t.jsx(j,{label:"Gender",value:e.gender}),t.jsx(j,{label:"Birth Date",value:A(e.date_of_birth)}),t.jsx(j,{label:"Customer ID",value:e.id})]})]}),t.jsxs(v,{md:6,children:[t.jsx("h6",{className:"fw-semibold mb-3",children:"Address Information"}),t.jsxs(y,{variant:"flush",children:[t.jsx(j,{label:"Address",value:e.address}),t.jsx(j,{label:"City",value:e.city}),t.jsx(j,{label:"State",value:e.state}),t.jsx(j,{label:"Postal Code",value:e.postal_code}),t.jsx(j,{label:"Country",value:e.country})]})]})]})}),De=({customer:e})=>t.jsx(R,{title:"Order History",placeholder:"Search orders...",data:e.orders,columns:["Order ID","Date","Items","Amount","Status","Actions"]}),Je=({customer:e})=>t.jsx(R,{title:"Service History",placeholder:"Search services...",data:e.services,columns:["Service ID","Date","Service Type","Technician","Status","Actions"]}),Qe=({customer:e})=>t.jsx(R,{title:"Payment History",placeholder:"Search payments...",data:e.payments,columns:["Payment ID","Date","Amount","Method","Status","Reference"]}),j=({label:e,value:l})=>t.jsxs(y.Item,{className:"px-0 d-flex justify-content-between",children:[t.jsxs("span",{className:"text-muted",children:[e,":"]}),t.jsx("span",{children:l||"N/A"})]}),R=({title:e,placeholder:l,data:r,columns:s})=>t.jsxs("div",{className:"p-3",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[t.jsx("h6",{className:"fw-semibold mb-0",children:e}),t.jsxs(F,{style:{width:"300px"},children:[t.jsx(F.Text,{children:t.jsx(be,{})}),t.jsx(x.Control,{placeholder:l})]})]}),r&&r.length>0?t.jsx("div",{className:"table-responsive",children:t.jsxs(ve,{hover:!0,bordered:!0,children:[t.jsx("thead",{children:t.jsx("tr",{children:s.map(a=>t.jsx("th",{children:a},a))})}),t.jsx("tbody",{children:r.map(a=>t.jsxs("tr",{children:[t.jsxs("td",{children:["#",a.id]}),t.jsx("td",{children:A(a.created_at)}),t.jsx("td",{children:a.amount||"—"}),t.jsx("td",{children:t.jsx(z,{bg:"secondary",children:a.status||"—"})}),t.jsx("td",{children:t.jsx(b,{variant:"outline-primary",size:"sm",children:t.jsx(je,{size:14})})})]},a.id))})]})}):t.jsx("div",{className:"text-center text-muted py-5",children:"No records found for this customer."})]});export{$t as default};
