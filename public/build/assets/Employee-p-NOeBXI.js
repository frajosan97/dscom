import{r,j as a,$ as h,Y as g}from"./app-OHbyyb7G.js";import{f as v,p as w}from"./index-Ch0Q8FK_.js";import{S as j}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{y as u,R as N}from"./Footer-CdCYi3s-.js";import{E as T}from"./ErpLayout-Co_V5vyW.js";import{x as C}from"./axios-CwqzNN1P.js";import{C as E,B}from"./Image-DjGCkx_G.js";import{C as b}from"./Form-DD85BSXi.js";import{B as D}from"./ButtonGroup-C_wAFmpa.js";import{C as f}from"./Card-CTI6bRV3.js";import{T as S}from"./Table-BoWuZrVy.js";import"./iconBase-Bz_lrQRY.js";import"./CloseButton-DySoQWw3.js";/* empty css                      */function J(){const[c,k]=r.useState(""),[n,A]=r.useState("all"),o=r.useRef(!1),l=r.useRef(null),d=r.useCallback(()=>{if(o.current)return;$.fn.DataTable.isDataTable("#employeeTable")&&$("#employeeTable").DataTable().destroy();const s=$("#employeeTable").DataTable({processing:!0,serverSide:!0,ajax:{url:route("employee.index"),type:"GET",data:function(e){e.search=c,e.status=n!=="all"?n:""}},columns:[{data:"DT_RowIndex",title:"#",className:"text-center",width:"1%",orderable:!1,searchable:!1},{data:"profile_image",title:"",className:"text-center",width:"3%",render:(e,i,t)=>e?`<img src="/storage/${e}" alt="${t.name}" class="rounded-circle" width="40" height="40" style="object-fit: cover;" />`:`<div class="rounded-circle bg-light d-flex align-items-center justify-content-center mx-auto" style="width: 40px; height: 40px;">
                            <i class="bi bi-person text-muted"></i>
                        </div>`,orderable:!1,searchable:!1},{data:"name",title:"Name",className:"text-start",render:(e,i,t)=>`<div>
                            <div class="fw-semibold">${e}</div>
                            <small class="text-muted">${t.designation||"N/A"}</small>
                        </div>`},{data:"contact",title:"Contact",className:"text-start",render:(e,i,t)=>`<div>
                            <div>${t.email||"N/A"}</div>
                            <small class="text-muted">${t.phone}</small>
                        </div>`},{data:"role",title:"Role",className:"text-start",width:"10%"},{data:"salary",title:"Salary",className:"text-end",render:e=>!e||e==="0"?"N/A":`<span class="fw-semibold">$${parseFloat(e).toLocaleString()}</span>`},{data:"status",title:"Status",className:"text-center",width:"10%",render:e=>{const t={Enable:{badge:"success",text:"Active",icon:"bi-check-circle"},Disable:{badge:"secondary",text:"Inactive",icon:"bi-x-circle"}}[e]||{badge:"warning",text:e,icon:"bi-question-circle"};return`<span class="badge bg-${t.badge} px-3 py-2">
                            <i class="bi ${t.icon} me-1"></i>
                            ${t.text}
                        </span>`}},{data:"action",title:"Actions",className:"text-center",width:"15%",orderable:!1,searchable:!1,render:(e,i,t)=>`<div class="d-flex justify-content-center gap-2">
                            <button class="btn btn-sm btn-outline-primary edit-btn" data-id="${t.id}" title="Edit">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-info view-btn" data-id="${t.id}" title="View Details">
                                <i class="bi bi-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger delete-btn" data-id="${t.id}" title="Delete">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>`}],drawCallback:function(){$(".edit-btn").off("click").on("click",function(){const e=$(this).data("id");p(e)}),$(".view-btn").off("click").on("click",function(){const e=$(this).data("id");x(e)}),$(".delete-btn").off("click").on("click",function(){const e=$(this).data("id");y(e)})},initComplete:function(){o.current=!0},language:{processing:'<div class="spinner-border text-primary" role="status"></div>',emptyTable:"No employees found",zeroRecords:"No matching employees found"}});return l.current=s,s},[c,n]);r.useEffect(()=>{o.current&&l.current&&l.current.ajax.reload()},[c,n]),r.useEffect(()=>(d(),()=>{$.fn.DataTable.isDataTable("#employeeTable")&&($("#employeeTable").DataTable().destroy(),o.current=!1)}),[d]);const p=s=>{window.location.href=route("employee.edit",s)},x=s=>{window.location.href=route("employee.show",s)},y=async s=>{var e,i;try{if(!(await j.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)return;const m=await C.delete(route("employee.destroy",s));m.data.success&&(u.success(m.data.message),l.current&&l.current.ajax.reload())}catch(t){u.error(((i=(e=t.response)==null?void 0:e.data)==null?void 0:i.message)||"An error occurred while deleting the employee")}};return a.jsxs(T,{children:[a.jsx(h,{title:"Employee Management"}),a.jsxs(E,{fluid:!0,children:[a.jsxs(N,{className:"mb-4",children:[a.jsxs(b,{children:[a.jsxs("h3",{className:"fw-bold text-primary",children:[a.jsx(v,{className:"me-2"}),"Employee Management"]}),a.jsx("p",{className:"text-muted mb-0",children:"View, manage, and maintain all employee accounts."})]}),a.jsx(b,{className:"text-end",children:a.jsx(D,{children:a.jsxs(B,{variant:"outline-primary",as:g,href:route("employee.create"),className:"d-flex align-items-center",children:[a.jsx(w,{className:"me-1"}),"Add Employee"]})})})]}),a.jsx(f,{children:a.jsx(f.Body,{children:a.jsx("div",{className:"table-responsive",children:a.jsx(S,{bordered:!0,hover:!0,responsive:!0,id:"employeeTable",className:"align-middle mb-0"})})})})]})]})}export{J as default};
