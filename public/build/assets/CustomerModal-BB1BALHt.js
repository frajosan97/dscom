import{j as e}from"./app-B6bJk2Gh.js";import{u as f}from"./formik.esm-B4gcRhUr.js";import{c as g,b as n}from"./index.esm-Bxz4JLJR.js";import{R as y,y as t}from"./Footer-BPljjA9E.js";import{x as B}from"./axios-Bz5UAVk7.js";import{M as o}from"./Modal-DiTdyzUT.js";import{F as a,C as l}from"./Form-Clbnm1Ud.js";import{B as c}from"./Image-CDh2egit.js";const N=g().shape({name:n().required("Customer name is required").max(255,"Customer name must not exceed 255 characters"),email:n().email("Invalid email address").max(255,"Email must not exceed 255 characters"),phone:n().max(20,"Phone number must not exceed 20 characters"),tax_number:n().max(50,"Tax number must not exceed 50 characters"),address:n().max(500,"Address must not exceed 500 characters")});function L({show:u,onClose:d,onCustomerAdded:h}){const r=f({initialValues:{name:"",email:"",phone:"",tax_number:"",address:""},validationSchema:N,onSubmit:async(x,{setSubmitting:p,resetForm:b})=>{var i,m;try{(await B.post(route("customers.store"),x)).data.success&&(t.success("Customer added successfully."),b(),d(),h())}catch(s){s.response&&s.response.data.errors?Object.entries(s.response.data.errors).forEach(([j,C])=>{C.forEach(v=>{t.error(`${j}: ${v}`)})}):t.error(((m=(i=s.response)==null?void 0:i.data)==null?void 0:m.message)||"An error occurred while adding the customer")}finally{p(!1)}}});return e.jsxs(o,{show:u,onHide:d,size:"lg",centered:!0,children:[e.jsx(o.Header,{closeButton:!0,className:"border-bottom-0",children:e.jsx(o.Title,{className:"h5",children:"Add New Customer"})}),e.jsxs(a,{onSubmit:r.handleSubmit,noValidate:!0,children:[e.jsx(o.Body,{className:"pt-0",children:e.jsxs(y,{children:[e.jsx(l,{md:6,children:e.jsxs(a.Group,{className:"mb-3",children:[e.jsxs(a.Label,{children:["Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(a.Control,{type:"text",name:"name",placeholder:"Customer name",value:r.values.name,onChange:r.handleChange,onBlur:r.handleBlur,isInvalid:r.touched.name&&!!r.errors.name,required:!0}),e.jsx(a.Control.Feedback,{type:"invalid",children:r.errors.name})]})}),e.jsx(l,{md:6,children:e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Email"}),e.jsx(a.Control,{type:"email",name:"email",placeholder:"Customer email",value:r.values.email,onChange:r.handleChange,onBlur:r.handleBlur,isInvalid:r.touched.email&&!!r.errors.email}),e.jsx(a.Control.Feedback,{type:"invalid",children:r.errors.email})]})}),e.jsx(l,{md:6,children:e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Phone"}),e.jsx(a.Control,{type:"text",name:"phone",placeholder:"Phone number",value:r.values.phone,onChange:r.handleChange,onBlur:r.handleBlur,isInvalid:r.touched.phone&&!!r.errors.phone}),e.jsx(a.Control.Feedback,{type:"invalid",children:r.errors.phone})]})}),e.jsx(l,{md:6,children:e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Tax Number"}),e.jsx(a.Control,{type:"text",name:"tax_number",placeholder:"Tax identification number",value:r.values.tax_number,onChange:r.handleChange,onBlur:r.handleBlur,isInvalid:r.touched.tax_number&&!!r.errors.tax_number}),e.jsx(a.Control.Feedback,{type:"invalid",children:r.errors.tax_number})]})}),e.jsx(l,{md:12,children:e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Address"}),e.jsx(a.Control,{as:"textarea",rows:3,name:"address",placeholder:"Full address",value:r.values.address,onChange:r.handleChange,onBlur:r.handleBlur,isInvalid:r.touched.address&&!!r.errors.address}),e.jsx(a.Control.Feedback,{type:"invalid",children:r.errors.address})]})})]})}),e.jsxs(o.Footer,{className:"border-top-0",children:[e.jsx(c,{variant:"outline-secondary",onClick:d,children:"Cancel"}),e.jsx(c,{variant:"primary",type:"submit",disabled:r.isSubmitting,children:r.isSubmitting?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save Customer"})]})]})]})}export{L as C};
