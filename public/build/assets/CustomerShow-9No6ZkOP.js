import{r as f,R as d,j as r,$ as ae,Y as F}from"./app-rlNx4Iiu.js";import{F as ne}from"./index-Da1SSkqS.js";import{S as O}from"./hoist-non-react-statics.cjs-CiIQoDaf.js";import{P as i,R as $,y as ie,I as k}from"./Footer-UqFNTOz4.js";import{E as oe}from"./ErpLayout-C6UZf7Lx.js";import{f as R,a as ce}from"./helpers-C-kXKNRi.js";import{M as g}from"./Modal-BkW5MwN6.js";import{F as x,C as b}from"./Form-lYHRddvs.js";import{P as V,C as de}from"./person-FfioBIRV.js";import{B as v,C as me}from"./Image-BuCKbu51.js";import{J as ue}from"./journal-Bj_BApwG.js";import{C as he}from"./CustomerModal-FMOFLWhd.js";import{x as fe}from"./axios-BGSb5e6B.js";import{u as pe}from"./useErrorToast-Di2pbtg_.js";import{B as G}from"./ButtonGroup-B7EHA9Va.js";import{P as xe}from"./pencil-qkcr0OYg.js";import{C as p}from"./Card-Xz6cOBHW.js";import{B as C}from"./Badge-JDmlgAPC.js";import{L as y}from"./ListGroup-H7w0BALe.js";import{T as ve}from"./Tabs-DpdwlD7r.js";import{T as z}from"./Tab-C6XqvB9Q.js";import{S as be}from"./search-CuIszRt-.js";import{T as je}from"./Table-DemdZvHG.js";import{E as ge}from"./eye-BJPJ7Ivw.js";import"./iconBase-CNLCoK3g.js";import"./CloseButton-BnZ8vsiJ.js";/* empty css                      */import"./formik.esm-CMUZ3cpK.js";import"./index.esm-LX6V2kr2.js";var ye=["color","size","title","className"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var t in s)({}).hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},S.apply(null,arguments)}function we(e,l){if(e==null)return{};var s,t,a=Ne(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)s=n[t],l.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Ne(e,l){if(e==null)return{};var s={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(l.indexOf(t)!==-1)continue;s[t]=e[t]}return s}var K=f.forwardRef(function(e,l){var s=e.color,t=s===void 0?"currentColor":s,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=we(e,ye);return d.createElement("svg",S({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:t,className:["bi","bi-arrow-left",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"}))});K.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Oe=["color","size","title","className"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var t in s)({}).hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},_.apply(null,arguments)}function $e(e,l){if(e==null)return{};var s,t,a=Pe(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)s=n[t],l.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Pe(e,l){if(e==null)return{};var s={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(l.indexOf(t)!==-1)continue;s[t]=e[t]}return s}var Y=f.forwardRef(function(e,l){var s=e.color,t=s===void 0?"currentColor":s,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=$e(e,Oe);return d.createElement("svg",_({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:t,className:["bi","bi-cash-coin",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{fillRule:"evenodd",d:"M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8m5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0"}),d.createElement("path",{d:"M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195z"}),d.createElement("path",{d:"M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083q.088-.517.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1z"}),d.createElement("path",{d:"M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 6 6 0 0 1 3.13-1.567"}))});Y.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var ze=["color","size","title","className"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var t in s)({}).hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},E.apply(null,arguments)}function Ce(e,l){if(e==null)return{};var s,t,a=Se(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)s=n[t],l.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Se(e,l){if(e==null)return{};var s={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(l.indexOf(t)!==-1)continue;s[t]=e[t]}return s}var D=f.forwardRef(function(e,l){var s=e.color,t=s===void 0?"currentColor":s,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=Ce(e,ze);return d.createElement("svg",E({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:t,className:["bi","bi-chat",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105"}))});D.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var _e=["color","size","title","className"];function T(){return T=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var t in s)({}).hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},T.apply(null,arguments)}function Ee(e,l){if(e==null)return{};var s,t,a=Te(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)s=n[t],l.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Te(e,l){if(e==null)return{};var s={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(l.indexOf(t)!==-1)continue;s[t]=e[t]}return s}var J=f.forwardRef(function(e,l){var s=e.color,t=s===void 0?"currentColor":s,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=Ee(e,_e);return d.createElement("svg",T({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:t,className:["bi","bi-envelope",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z"}))});J.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Be=["color","size","title","className"];function B(){return B=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var t in s)({}).hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},B.apply(null,arguments)}function Me(e,l){if(e==null)return{};var s,t,a=Le(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)s=n[t],l.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Le(e,l){if(e==null)return{};var s={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(l.indexOf(t)!==-1)continue;s[t]=e[t]}return s}var Q=f.forwardRef(function(e,l){var s=e.color,t=s===void 0?"currentColor":s,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=Me(e,Be);return d.createElement("svg",B({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:t,className:["bi","bi-geo-alt",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A32 32 0 0 1 8 14.58a32 32 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10"}),d.createElement("path",{d:"M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6"}))});Q.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Ie=["color","size","title","className"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var t in s)({}).hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},M.apply(null,arguments)}function Ae(e,l){if(e==null)return{};var s,t,a=Re(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)s=n[t],l.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Re(e,l){if(e==null)return{};var s={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(l.indexOf(t)!==-1)continue;s[t]=e[t]}return s}var U=f.forwardRef(function(e,l){var s=e.color,t=s===void 0?"currentColor":s,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=Ae(e,Ie);return d.createElement("svg",M({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:t,className:["bi","bi-phone",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M11 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),d.createElement("path",{d:"M8 14a1 1 0 1 0 0-2 1 1 0 0 0 0 2"}))});U.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var We=["color","size","title","className"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var t in s)({}).hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},L.apply(null,arguments)}function He(e,l){if(e==null)return{};var s,t,a=Fe(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)s=n[t],l.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Fe(e,l){if(e==null)return{};var s={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(l.indexOf(t)!==-1)continue;s[t]=e[t]}return s}var q=f.forwardRef(function(e,l){var s=e.color,t=s===void 0?"currentColor":s,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=He(e,We);return d.createElement("svg",L({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:t,className:["bi","bi-star",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.56.56 0 0 0-.163-.505L1.71 6.745l4.052-.576a.53.53 0 0 0 .393-.288L8 2.223l1.847 3.658a.53.53 0 0 0 .393.288l4.052.575-2.906 2.77a.56.56 0 0 0-.163.506l.694 3.957-3.686-1.894a.5.5 0 0 0-.461 0z"}))});q.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var ke=["color","size","title","className"];function I(){return I=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var t in s)({}).hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},I.apply(null,arguments)}function Ge(e,l){if(e==null)return{};var s,t,a=Ve(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)s=n[t],l.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Ve(e,l){if(e==null)return{};var s={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(l.indexOf(t)!==-1)continue;s[t]=e[t]}return s}var X=f.forwardRef(function(e,l){var s=e.color,t=s===void 0?"currentColor":s,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=Ge(e,ke);return d.createElement("svg",I({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:t,className:["bi","bi-telephone-fill",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{fillRule:"evenodd",d:"M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z"}))});X.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};var Ke=["color","size","title","className"];function A(){return A=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var t in s)({}).hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},A.apply(null,arguments)}function Ye(e,l){if(e==null)return{};var s,t,a=De(e,l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)s=n[t],l.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function De(e,l){if(e==null)return{};var s={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(l.indexOf(t)!==-1)continue;s[t]=e[t]}return s}var Z=f.forwardRef(function(e,l){var s=e.color,t=s===void 0?"currentColor":s,a=e.size,n=a===void 0?"1em":a,o=e.title,c=o===void 0?null:o,m=e.className,u=m===void 0?"":m,h=Ye(e,Ke);return d.createElement("svg",A({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:t,className:["bi","bi-telephone",u].filter(Boolean).join(" ")},h),c?d.createElement("title",null,c):null,d.createElement("path",{d:"M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z"}))});Z.propTypes={color:i.string,size:i.oneOfType([i.string,i.number]),title:i.string,className:i.string};const Je=({showCallModal:e,setShowCallModal:l,customer:s,callDetails:t,setCallDetails:a,handleCallSubmit:n,handleCallNow:o})=>{const c=[[{label:"1",sub:"♾️"},{label:"2",sub:"ABC"},{label:"3",sub:"DEF"}],[{label:"4",sub:"GHI"},{label:"5",sub:"JKL"},{label:"6",sub:"MNO"}],[{label:"7",sub:"PQRS"},{label:"8",sub:"TUV"},{label:"9",sub:"WXYZ"}],[{label:"*",sub:""},{label:"0",sub:"+"},{label:"#",sub:""}]],m=u=>{a({...t,phoneNumber:t.phoneNumber+u})};return r.jsxs(g,{show:e,centered:!0,onHide:()=>l(!1),children:[r.jsx(g.Header,{className:"border-0 py-1",closeButton:!0,children:r.jsx(g.Title,{children:"Call Customer"})}),r.jsx(x,{onSubmit:n,children:r.jsxs(g.Body,{className:"border-0",children:[r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2",style:{width:"80px",height:"80px"},children:r.jsx(V,{size:40,className:"text-white"})})}),r.jsxs("div",{className:"mb-3",children:[r.jsx(x.Label,{className:"visually-hidden",children:"Phone Number"}),r.jsx(x.Control,{type:"text",value:t.phoneNumber,onChange:u=>a({...t,phoneNumber:u.target.value.replace(/\D/g,"")}),className:"text-center py-3 fs-5",placeholder:"Enter phone number"})]}),r.jsxs("div",{className:"keypad",children:[c.map((u,h)=>r.jsx($,{className:"g-1 mb-1",children:u.map(w=>r.jsx(b,{xs:4,children:r.jsxs(v,{variant:"outline-light",className:"w-100 d-flex flex-column border text-dark",onClick:()=>m(w.label),children:[r.jsx("span",{className:"fs-5 mb-0",children:w.label}),w.sub&&r.jsx("small",{className:"text-muted",children:w.sub})]})},w.label))},h)),r.jsxs($,{className:"g-2",children:[r.jsx(b,{xs:4,children:r.jsx(v,{variant:"outline-secondary",className:"w-100 py-2",onClick:()=>a({...t,phoneNumber:t.phoneNumber.slice(0,-1)}),children:r.jsx(K,{size:24})})}),r.jsx(b,{xs:4,children:r.jsxs(v,{variant:"success",className:"w-100 py-2",onClick:o,disabled:!t.phoneNumber,children:[r.jsx(X,{size:24}),r.jsx("span",{className:"ms-1",children:"Call"})]})}),r.jsx(b,{xs:4,children:r.jsxs(v,{variant:"outline-primary",className:"w-100 py-2",type:"submit",children:[r.jsx(ue,{size:24}),r.jsx("span",{className:"ms-1",children:"Log"})]})})]})]})]})})]})},Qe=({showSendSmsModal:e,setShowSendSmsModal:l,customer:s,smsDetails:t,setSmsDetails:a,handleSmsSubmit:n})=>r.jsxs(g,{show:e,onHide:()=>l(!1),centered:!0,children:[r.jsx(g.Header,{closeButton:!0,children:r.jsx(g.Title,{children:"Send Message"})}),r.jsxs(x,{onSubmit:n,children:[r.jsxs(g.Body,{className:"border-0",children:[r.jsxs(x.Group,{className:"mb-3",children:[r.jsx(x.Label,{children:"Phone Number"}),r.jsx(x.Control,{type:"text",value:t.phoneNumber,onChange:o=>a({...t,phoneNumber:o.target.value.replace(/\D/g,"")}),placeholder:"Enter phone number"})]}),r.jsxs(x.Group,{className:"mb-3",children:[r.jsx(x.Label,{children:"Message"}),r.jsx(x.Control,{as:"textarea",rows:4,value:t.message,onChange:o=>a({...t,message:o.target.value}),placeholder:"Type your message here..."})]})]}),r.jsxs(g.Footer,{children:[r.jsx(v,{variant:"primary",type:"submit",disabled:!t.phoneNumber||!t.message,children:"Send Message"}),r.jsx(v,{variant:"secondary",onClick:()=>l(!1),children:"Cancel"})]})]})]});function St({customer:e}){const{showErrorToast:l}=pe(),[s,t]=f.useState("overview"),[a,n]=f.useState(!1),[o,c]=f.useState(!1),[m,u]=f.useState(!1),[h,w]=f.useState({phoneNumber:e.phone||"",callType:"outgoing",notes:"",duration:"",status:"completed"}),[H,ee]=f.useState({customerId:e.id,phoneNumber:(e==null?void 0:e.phone)||"",message:""}),te=N=>{switch(N){case"retail":return"info";case"wholesale":return"warning";case"corporate":return"success";default:return"secondary"}},re=async N=>{if(N.preventDefault(),!!(await O.fire({title:"Send SMS?",text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, send it!"})).isConfirmed){O.fire({title:"Sending SMS...",allowOutsideClick:!1,didOpen:()=>O.showLoading()});try{const P=await fe.post(route("send-sms"),H);P.data.success&&ie.success(P.data.message)}catch(P){l(P)}finally{O.close(),c(!1)}}},se=async N=>{N.preventDefault(),(await O.fire({title:"Call Now?",text:"This cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, call!"})).isConfirmed&&(e!=null&&e.phone?window.location.href=`tel:${e.phone}`:O.fire("Error","No phone number available.","error"))};return r.jsxs(oe,{children:[r.jsx(ae,{title:`Customer - ${e.full_name}`}),r.jsxs(me,{fluid:!0,className:"py-4",children:[r.jsxs($,{className:"mb-4",children:[r.jsxs(b,{children:[r.jsx("h3",{className:"fw-bold text-primary text-capitalize",children:e==null?void 0:e.full_name}),r.jsx("p",{className:"text-muted mb-0",children:"Managing the customer account"})]}),r.jsx(b,{className:"text-end",children:r.jsxs(G,{className:"gap-2",children:[r.jsxs(v,{variant:"outline-secondary",as:F,href:route("customers.index"),className:"rounded",children:[r.jsx(ne,{className:"me-1"})," Back"]}),r.jsxs(v,{variant:"outline-primary",as:F,href:route("customers.edit",e.id),className:"rounded",children:[r.jsx(xe,{className:"me-1"})," Edit"]})]})})]}),r.jsx(p,{children:r.jsx(p.Body,{children:r.jsxs($,{children:[r.jsxs(b,{md:4,lg:3,children:[r.jsx(p,{className:"border-0 shadow-sm mb-3",children:r.jsxs(p.Body,{className:"text-center p-4",children:[r.jsx("div",{className:"mb-3",children:e!=null&&e.profile_image_url?r.jsx("img",{src:e.profile_image_url,alt:"Profile",className:"rounded-circle",style:{width:"100px",height:"100px",objectFit:"cover"}}):r.jsx("div",{className:"bg-light rounded-circle d-flex align-items-center justify-content-center mx-auto",style:{width:"100px",height:"100px"},children:r.jsx(V,{size:40})})}),r.jsxs("h5",{className:"fw-bold mb-1",children:[e.first_name," ",e.last_name]}),r.jsx(C,{bg:te(e.customer_type),className:"text-capitalize mb-2",children:e.customer_type}),r.jsxs("div",{className:"d-flex justify-content-center mb-3",children:[r.jsx(C,{bg:e.is_active?"success":"secondary",className:"me-2",children:e.is_active?"Active":"Inactive"}),r.jsx(C,{bg:e.is_verified?"info":"warning",children:e.is_verified?"Verified":"Unverified"})]}),r.jsxs(y,{variant:"flush",className:"text-start",children:[r.jsxs(y.Item,{className:"px-0 d-flex align-items-center",children:[r.jsx(J,{className:"text-muted me-2"}),e.email||"N/A"]}),r.jsxs(y.Item,{className:"px-0 d-flex align-items-center",children:[r.jsx(Z,{className:"text-muted me-2"}),e.phone||"N/A"]}),r.jsxs(y.Item,{className:"px-0 d-flex align-items-center",children:[r.jsx(Q,{className:"text-muted me-2"}),e.city?`${e.city}, ${e.state}`:"Location not specified"]}),r.jsxs(y.Item,{className:"px-0 d-flex align-items-center",children:[r.jsx(de,{className:"text-muted me-2"}),"Joined:"," ",R(e.created_at)]})]})]})}),r.jsxs(p,{className:"border-0 shadow-sm mb-3",children:[r.jsx(p.Header,{className:"bg-white fw-semibold",children:"Account Summary"}),r.jsxs(p.Body,{children:[r.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[r.jsxs("span",{children:[r.jsx(q,{className:"text-warning me-2"}),"Loyalty Points"]}),r.jsx("span",{className:"fw-bold",children:e.loyalty_points||0})]}),r.jsxs("div",{className:"d-flex justify-content-between",children:[r.jsxs("span",{children:[r.jsx(Y,{className:"text-success me-2"}),"Balance"]}),r.jsx("span",{className:"fw-bold",children:ce(e.balance)})]})]})]}),r.jsxs(p,{className:"border-0 shadow-sm",children:[r.jsx(p.Header,{className:"bg-white fw-semibold",children:"Quick Actions"}),r.jsx(p.Body,{children:r.jsxs(G,{className:"d-grid gap-2",children:[r.jsxs(v,{variant:"outline-primary",className:"text-start rounded-pill",onClick:()=>n(!0),children:[r.jsx(U,{})," Call Customer"]}),r.jsxs(v,{variant:"outline-primary",className:"text-start rounded-pill",onClick:()=>c(!0),children:[r.jsx(D,{})," Send Message"]})]})})]})]}),r.jsx(b,{md:8,lg:9,children:r.jsx(p,{className:"border-0 shadow-sm",children:r.jsx(p.Body,{className:"p-0",children:r.jsxs(ve,{activeKey:s,onSelect:N=>t(N),className:"px-3 pt-3",children:[r.jsx(z,{eventKey:"overview",title:"Overview",children:r.jsx(Ue,{customer:e})}),r.jsx(z,{eventKey:"orders",title:"Orders",children:r.jsx(qe,{customer:e})}),r.jsx(z,{eventKey:"services",title:"Services",children:r.jsx(Xe,{customer:e})}),r.jsx(z,{eventKey:"payments",title:"Payments",children:r.jsx(Ze,{customer:e})})]})})})})]})})})]}),r.jsx(Je,{showCallModal:a,setShowCallModal:n,customer:e,callDetails:h,setCallDetails:w,handleCallNow:se}),r.jsx(Qe,{showSendSmsModal:o,setShowSendSmsModal:c,customer:e,smsDetails:H,setSmsDetails:ee,handleSmsSubmit:re}),r.jsx(he,{show:m,customer:e,onHide:()=>u(!1)})]})}const Ue=({customer:e})=>r.jsx("div",{className:"p-3",children:r.jsxs($,{children:[r.jsxs(b,{md:6,children:[r.jsx("h6",{className:"fw-semibold mb-3",children:"Personal Information"}),r.jsxs(y,{variant:"flush",children:[r.jsx(j,{label:"Full Name",value:e.full_name}),r.jsx(j,{label:"Gender",value:e.gender}),r.jsx(j,{label:"Birth Date",value:R(e.date_of_birth)}),r.jsx(j,{label:"Customer ID",value:e.id})]})]}),r.jsxs(b,{md:6,children:[r.jsx("h6",{className:"fw-semibold mb-3",children:"Address Information"}),r.jsxs(y,{variant:"flush",children:[r.jsx(j,{label:"Address",value:e.address}),r.jsx(j,{label:"City",value:e.city}),r.jsx(j,{label:"State",value:e.state}),r.jsx(j,{label:"Postal Code",value:e.postal_code}),r.jsx(j,{label:"Country",value:e.country})]})]})]})}),qe=({customer:e})=>r.jsx(W,{title:"Order History",placeholder:"Search orders...",data:e.orders,columns:["Order ID","Date","Items","Amount","Status","Actions"]}),Xe=({customer:e})=>r.jsx(W,{title:"Service History",placeholder:"Search services...",data:e.services,columns:["Service ID","Date","Service Type","Technician","Status","Actions"]}),Ze=({customer:e})=>r.jsx(W,{title:"Payment History",placeholder:"Search payments...",data:e.payments,columns:["Payment ID","Date","Amount","Method","Status","Reference"]}),j=({label:e,value:l})=>r.jsxs(y.Item,{className:"px-0 d-flex justify-content-between",children:[r.jsxs("span",{className:"text-muted",children:[e,":"]}),r.jsx("span",{children:l||"N/A"})]}),W=({title:e,placeholder:l,data:s,columns:t})=>r.jsxs("div",{className:"p-3",children:[r.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[r.jsx("h6",{className:"fw-semibold mb-0",children:e}),r.jsxs(k,{style:{width:"300px"},children:[r.jsx(k.Text,{children:r.jsx(be,{})}),r.jsx(x.Control,{placeholder:l})]})]}),s&&s.length>0?r.jsx("div",{className:"table-responsive",children:r.jsxs(je,{hover:!0,bordered:!0,children:[r.jsx("thead",{children:r.jsx("tr",{children:t.map(a=>r.jsx("th",{children:a},a))})}),r.jsx("tbody",{children:s.map(a=>r.jsxs("tr",{children:[r.jsxs("td",{children:["#",a.id]}),r.jsx("td",{children:R(a.created_at)}),r.jsx("td",{children:a.amount||"—"}),r.jsx("td",{children:r.jsx(C,{bg:"secondary",children:a.status||"—"})}),r.jsx("td",{children:r.jsx(v,{variant:"outline-primary",size:"sm",children:r.jsx(ge,{size:14})})})]},a.id))})]})}):r.jsx("div",{className:"text-center text-muted py-5",children:"No records found for this customer."})]});export{St as default};
