import{j as s,Y as y}from"./app-DCWOQcEB.js";import{a as m}from"./helpers-DfyTVTVS.js";import{a0 as x,a1 as b,v as p}from"./index-eKalaMO-.js";import{A as k}from"./AddToCartBtn-zTaVrf8o.js";import{C as a}from"./Card-DPWBKIrz.js";import{B as n}from"./Badge-JNCvcmkv.js";function P({product:e,systemMode:d=null,showCategory:o=!1,showStockStatus:N=!1,showActions:v=!0,showComparePrice:_=!0,className:h="",...g}){const r=()=>!e.compare_price||e.compare_price<=e.base_price?0:Math.round((e.compare_price-e.base_price)/e.compare_price*100),j=()=>{var t,l,i;return(t=e==null?void 0:e.default_image)!=null&&t.image_path?`/storage/${(l=e==null?void 0:e.default_image)==null?void 0:l.image_path}`:((i=e==null?void 0:e.images)==null?void 0:i.length)>0?`/storage/${e==null?void 0:e.images[0].image_path}`:"/images/default-product.jpg"},f=()=>e.is_active?!e.is_in_stock&&!e.allow_backorders?{text:"Out of Stock",variant:"danger"}:e.is_on_sale?{text:"On Sale",variant:"danger"}:e.is_new?{text:"New",variant:"success"}:null:{text:"Inactive",variant:"secondary"},w=()=>{d==="erp"&&router.visit(route("product.edit",e.id))};return d==="erp"?(()=>{var t,l;return s.jsxs(a,{className:`h-100 product-card erp-mode border ${h}`,onClick:w,role:"button",tabIndex:0,...g,children:[s.jsxs("div",{className:"position-relative overflow-hidden",children:[s.jsx("div",{className:"product-image-wrapper",style:{height:"150px"},children:s.jsx(a.Img,{src:j(),alt:e.name,className:"product-image h-100 w-100 object-fit-cover",loading:"lazy"})}),s.jsx("div",{className:"position-absolute top-0 end-0 m-2",children:s.jsx(n,{bg:((t=f())==null?void 0:t.variant)||"light",className:"text-uppercase",pill:!0,children:((l=f())==null?void 0:l.text)||"Active"})})]}),s.jsxs(a.Body,{className:"d-flex flex-column p-3",children:[o&&e.category&&s.jsx("small",{className:"text-muted text-uppercase mb-1",children:e.category.name}),s.jsx(a.Title,{className:"product-name fs-6 fw-semibold mb-2 text-truncate",title:e.name,children:e.name}),s.jsxs("div",{className:"mb-2",children:[e.sku&&s.jsxs("small",{className:"text-muted d-block",children:["SKU: ",e.sku]}),N&&s.jsxs("div",{className:"d-flex align-items-center gap-2 mt-1",children:[s.jsx("span",{className:`badge bg-${e.is_in_stock?"success":"danger"}`,children:e.is_in_stock?"In Stock":"Out of Stock"}),e.track_quantity&&s.jsxs("small",{className:"text-muted",children:["Qty: ",e.total_quantity||0]})]})]}),s.jsxs("div",{className:"mt-auto",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"fs-5 fw-bold text-primary",children:m(e.base_price)}),e.cost_per_item&&s.jsxs("small",{className:"text-muted",children:["Cost:"," ",m(e.cost_per_item)]})]}),r()>0&&s.jsxs(n,{bg:"danger",className:"fs-6",children:["-",r(),"%"]})]}),s.jsxs("div",{className:"d-flex justify-content-between small text-muted",children:[s.jsxs("div",{children:[s.jsx(x,{className:"text-warning"})," ",e.rating||"N/A"]}),s.jsxs("div",{children:[s.jsx(b,{className:"me-1"})," ",e.views||0]}),s.jsxs("div",{children:[s.jsx(p,{className:"me-1"})," ",e.sold_count||0]})]})]})]})]})})():(()=>{var t,l;return s.jsxs(a,{className:`h-100 text-capitalize product-card storefront-mode border-0 shadow-sm hover-shadow transition-all ${h}`,...g,children:[s.jsxs(y,{href:route("product.show",e.slug),className:"text-decoration-none text-dark",children:[s.jsxs("div",{className:"position-relative overflow-hidden",children:[s.jsxs("div",{className:"product-image-wrapper",style:{height:"150px"},children:[s.jsx(a.Img,{src:j(),alt:e.name,className:"product-image h-100 w-100 object-fit-cover transition-transform",loading:"lazy"}),s.jsx("div",{className:"product-overlay position-absolute top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 hover-bg-opacity-75 transition-all d-flex align-items-center justify-content-center",children:s.jsx(b,{className:"text-white fs-4 opacity-0 hover-opacity-100 transition-all"})})]}),s.jsxs("div",{className:"position-absolute top-0 start-0 m-2 d-flex flex-column gap-1",children:[e.is_new&&s.jsx(n,{bg:"success",className:"shadow-sm",children:"New"}),e.is_bestseller&&s.jsxs(n,{bg:"danger",className:"shadow-sm",children:[s.jsx(x,{className:"me-1"})," Bestseller"]}),r()>0&&s.jsxs(n,{bg:"info",className:"shadow-sm",children:[r(),"% OFF"]})]})]}),s.jsxs(a.Body,{children:[o&&e.category&&s.jsx("small",{className:"text-muted text-uppercase d-block mb-1",children:e.category.name}),s.jsx(a.Title,{className:"product-name fs-6 fw-semibold mb-1 text-truncate",title:e.name,children:e.name}),e.short_description&&s.jsx(a.Text,{className:"text-muted small mb-1 line-clamp-2",children:e.short_description}),(e.sizes||e.colors)&&s.jsxs("div",{className:"d-flex gap-1 mb-1",children:[(t=e.sizes)==null?void 0:t.slice(0,3).map((i,c)=>s.jsx(n,{bg:"light",text:"dark",className:"border",children:i},`size-${c}`)),(l=e.colors)==null?void 0:l.slice(0,3).map((i,c)=>s.jsx(n,{bg:i.toLowerCase(),text:i.toLowerCase()==="white"?"dark":"white",className:"border",style:{backgroundColor:i},children:i},`color-${c}`))]}),s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-1",children:[s.jsxs("div",{children:[s.jsx("div",{className:"fs-5 fw-bold text-primary",children:m(e.base_price)}),_&&e.compare_price&&e.compare_price>e.base_price&&s.jsx("del",{className:"text-muted small",children:m(e.compare_price)})]}),e.rating&&s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx(x,{className:"text-warning me-1"}),s.jsx("span",{className:"small",children:e.rating})]})]})]})]}),v&&s.jsx(a.Footer,{className:"border-0 bg-transparent pt-0",children:s.jsx(k,{product:e,variant:"primary",className:"w-100",size:"sm"})})]})})()}export{P};
