import{r as n,j as e,$ as D,e as E}from"./app-BHgsMdMN.js";import{j as $,k as A,l as L,m as O,n as Y,o as _,p as q}from"./index-DlWpVg82.js";import{A as R}from"./AppLayout-xvi3SBch.js";import{C as z,B as j,I as G}from"./Image-DXsOGyib.js";import{C as r}from"./Card-DbtgvX4L.js";import{F as k,C as d}from"./Form-C31rj1ON.js";import{I as U,R as p}from"./Footer-D2ooF5pp.js";import{S}from"./Spinner-C-7Qdq2i.js";import{A as I}from"./Alert-BObHHMr3.js";import{L as i}from"./ListGroup-DMm8M87y.js";import{P as W}from"./ProgressBar-Bl6EuRJw.js";import{B as H}from"./Badge-DTh5tmjd.js";import"./iconBase-BMcVOwYX.js";import"./useData-CTeE6K4V.js";import"./CloseButton-qahUCrdS.js";function le({initialOrder:c}){var y,b,v;const[o,u]=n.useState("placed"),[m,w]=n.useState(""),[M,F]=n.useState(!!c),[a,h]=n.useState(c||null),[x,g]=n.useState(!1),[f,N]=n.useState(null),l=[{id:"placed",label:"Order Placed",icon:e.jsx(O,{}),description:"Your order has been received"},{id:"processed",label:"Processing",icon:e.jsx(Y,{}),description:"We're preparing your order"},{id:"shipped",label:"Shipped",icon:e.jsx(_,{}),description:"Your order is on the way"},{id:"delivered",label:"Delivered",icon:e.jsx(q,{}),description:"Your order has been delivered"}],C=(l.findIndex(s=>s.id===o)+1)/l.length*100,P=async s=>{g(!0),N(null);try{const t=await E.get(route("order.track",s));h(t.data),u(t.data.status||"placed"),F(!0)}catch{N("No order found with the provided tracking ID."),h(null)}finally{g(!1)}},T=s=>{s.preventDefault(),m.trim()&&P(m)};return n.useEffect(()=>{c&&(h(c),u(c.status||"placed"))},[c]),e.jsxs(R,{children:[e.jsx(D,{title:"Track Your Order"}),e.jsx(z,{className:"my-5",children:e.jsx(r,{className:"border-0 shadow-sm p-4",children:e.jsxs(r.Body,{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{children:"Track Your Order"}),e.jsx("p",{className:"text-muted",children:"Enter your order ID or tracking number to check the status"})]}),e.jsx(k,{onSubmit:T,className:"mb-4",children:e.jsxs(U,{children:[e.jsx(k.Control,{type:"text",placeholder:"Enter your order ID or tracking number",value:m,onChange:s=>w(s.target.value),required:!0}),e.jsx(j,{variant:"primary",type:"submit",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx(S,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),e.jsx("span",{className:"ms-2",children:"Searching..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"me-2"}),"Track Order"]})})]})}),x&&e.jsxs(I,{variant:"info",className:"text-center",children:[e.jsx(S,{animation:"border",size:"sm",className:"me-2"}),"Searching for your order..."]}),f&&e.jsxs(I,{variant:"danger",className:"text-center",children:[e.jsx("p",{children:f}),e.jsx("p",{className:"mb-0",children:"Please check your order number and try again."})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"mb-4",children:e.jsx(r.Body,{children:e.jsxs(p,{children:[e.jsxs(d,{md:6,children:[e.jsxs("h2",{children:["Order #",a.id]}),e.jsxs(i,{variant:"flush",children:[e.jsxs(i.Item,{children:[e.jsx(A,{className:"me-2"}),"Placed on"," ",new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),e.jsxs(i.Item,{children:[e.jsx(L,{className:"me-2"}),"Estimated delivery:"," ",a.estimated_delivery?new Date(a.estimated_delivery).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Calculating..."]})]})]}),e.jsx(d,{md:6,children:e.jsxs("div",{className:"mt-3 mt-md-0",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Order Status"}),e.jsx("strong",{children:(y=l.find(s=>s.id===o))==null?void 0:y.label})]}),e.jsx(W,{now:C})]})})]})})}),e.jsx(r,{className:"mb-4",children:e.jsxs(r.Body,{children:[e.jsx("h3",{className:"mb-4",children:"Order Status"}),e.jsx("div",{className:"timeline",children:l.map((s,t)=>e.jsxs("div",{className:`timeline-step ${o===s.id?"active":""} ${l.findIndex(B=>B.id===o)>t?"completed":""}`,children:[e.jsxs("div",{className:"step-icon-container",children:[e.jsx("div",{className:"step-icon",children:s.icon}),t<l.length-1&&e.jsx("div",{className:"step-connector"})]}),e.jsxs("div",{className:"step-content",children:[e.jsx("h4",{children:s.label}),e.jsx("p",{className:"text-muted",children:s.description})]})]},s.id))})]})}),e.jsxs(p,{className:"mb-4",children:[e.jsx(d,{md:8,className:"mb-4 mb-md-0",children:e.jsx(r,{children:e.jsxs(r.Body,{children:[e.jsx(r.Title,{children:"Order Items"}),e.jsx(i,{variant:"flush",children:(b=a.items)==null?void 0:b.map((s,t)=>e.jsx(i.Item,{children:e.jsxs(p,{className:"align-items-center",children:[e.jsx(d,{xs:3,md:2,children:e.jsx(G,{src:s.image||"https://via.placeholder.com/80",alt:s.name,fluid:!0,rounded:!0})}),e.jsxs(d,{xs:6,md:8,children:[e.jsx("h5",{className:"mb-1",children:s.name}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:["Qty:"," ",s.quantity]}),e.jsxs("span",{children:["$",s.price.toFixed(2)]})]})]}),e.jsx(d,{xs:3,md:2,className:"text-end",children:e.jsxs(H,{bg:"light",text:"dark",children:["$",(s.price*s.quantity).toFixed(2)]})})]})},t))}),e.jsxs("div",{className:"d-flex justify-content-between mt-3 fw-bold fs-5",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",(v=a.total)==null?void 0:v.toFixed(2)]})]})]})})}),e.jsx(d,{md:4,children:e.jsx(r,{children:e.jsxs(r.Body,{children:[e.jsx(r.Title,{children:"Shipping Information"}),e.jsxs(i,{variant:"flush",children:[e.jsxs(i.Item,{children:[e.jsx("h5",{children:"Tracking Number"}),e.jsx("p",{className:"text-muted",children:a.tracking_number})]}),e.jsxs(i.Item,{children:[e.jsx("h5",{children:"Carrier"}),e.jsx("p",{className:"text-muted",children:a.carrier})]}),e.jsxs(i.Item,{children:[e.jsx("h5",{children:"Shipping Address"}),e.jsx("p",{className:"text-muted",children:a.shipping_address})]})]}),e.jsx(j,{variant:"outline-primary",className:"w-100 mt-3",children:"Track Package on Carrier Website"})]})})})]}),e.jsx(r,{children:e.jsxs(r.Body,{className:"p-0",children:[e.jsx(r.Title,{className:"p-3",children:"Delivery Progress"}),e.jsxs("div",{className:"position-relative",children:[e.jsx("div",{className:"map-placeholder",style:{height:"300px",backgroundColor:"#f5f5f5"}}),e.jsxs("div",{className:"position-absolute top-50 start-50 translate-middle text-center p-3 bg-white rounded shadow-sm",style:{width:"80%"},children:[e.jsx("h4",{children:"Package in Transit"}),e.jsx("p",{className:"text-muted",children:"Your package is on its way to the destination"}),e.jsx(j,{variant:"primary",children:"View Full Tracking Details"})]})]})]})})]})]})})})]})}export{le as default};
