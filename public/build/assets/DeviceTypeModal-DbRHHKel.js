import{j as r}from"./app-BiuRToP-.js";import{c as p,a as g,b as L,d as h,u as N}from"./index.esm-C-wRHYDi.js";import{x as k}from"./axios-MrMjc1qv.js";import{M as t}from"./Modal-D2A1iNes.js";import{F as n,C as l}from"./Form-BA0l1WBA.js";import{R as u}from"./Footer-BFQJwEZ5.js";import{B as C}from"./Image---NnaHc0.js";function M({show:b,onHide:i,deviceType:s,parentDeviceTypes:d,onSuccess:f}){const m=!!s,_=p().shape({name:h().required("Name is required"),slug:h().required("Slug is required"),parent_id:g().nullable(),description:h().nullable(),is_active:L(),order:g().min(0,"Order must be positive")}),a=N({enableReinitialize:!0,initialValues:{name:(s==null?void 0:s.name)||"",slug:(s==null?void 0:s.slug)||"",parent_id:(s==null?void 0:s.parent_id)||null,description:(s==null?void 0:s.description)||"",icon:(s==null?void 0:s.icon)||"",image:(s==null?void 0:s.image)||"",is_active:(s==null?void 0:s.is_active)??!0,order:(s==null?void 0:s.order)||0,_method:m?"PUT":"POST"},validationSchema:_,onSubmit:async(o,{setSubmitting:I,setErrors:S})=>{var c,x;try{const e=m?route("device-type.update",s.id):route("device-type.store"),j=await k.post(e,o);j.data.success===!0&&(f(j.data.message),i())}catch(e){(x=(c=e.response)==null?void 0:c.data)!=null&&x.errors?S(e.response.data.errors):console.error("Error submitting form:",e)}finally{I(!1)}}});return r.jsxs(t,{show:b,onHide:i,size:"lg",centered:!0,backdrop:"static",children:[r.jsx(t.Header,{closeButton:!0,children:r.jsx(t.Title,{children:m?"Edit Device Type":"Create New Device Type"})}),r.jsxs(n,{onSubmit:a.handleSubmit,children:[r.jsxs(t.Body,{children:[r.jsxs(u,{className:"mb-3",children:[r.jsx(l,{md:6,children:r.jsxs(n.Group,{controlId:"name",children:[r.jsx(n.Label,{children:"Name *"}),r.jsx(n.Control,{type:"text",name:"name",value:a.values.name,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.name&&!!a.errors.name}),r.jsx(n.Control.Feedback,{type:"invalid",children:a.errors.name})]})}),r.jsx(l,{md:6,children:r.jsxs(n.Group,{controlId:"slug",children:[r.jsx(n.Label,{children:"Slug *"}),r.jsx(n.Control,{type:"text",name:"slug",value:a.values.slug,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.slug&&!!a.errors.slug}),r.jsx(n.Control.Feedback,{type:"invalid",children:a.errors.slug})]})})]}),r.jsxs(u,{className:"mb-3",children:[r.jsx(l,{md:6,children:r.jsxs(n.Group,{controlId:"parent_id",children:[r.jsx(n.Label,{children:"Parent Category"}),r.jsxs(n.Select,{name:"parent_id",value:a.values.parent_id||"",onChange:a.handleChange,children:[r.jsx("option",{value:"",children:"No Parent (Top Level)"}),d==null?void 0:d.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]})]})}),r.jsx(l,{md:6,children:r.jsxs(n.Group,{controlId:"order",children:[r.jsx(n.Label,{children:"Display Order"}),r.jsx(n.Control,{type:"number",min:"0",name:"order",value:a.values.order,onChange:a.handleChange})]})})]}),r.jsxs(n.Group,{controlId:"description",className:"mb-3",children:[r.jsx(n.Label,{children:"Description"}),r.jsx(n.Control,{as:"textarea",rows:3,name:"description",value:a.values.description,onChange:a.handleChange})]}),r.jsxs(u,{className:"mb-3",children:[r.jsx(l,{md:6,children:r.jsxs(n.Group,{controlId:"icon",children:[r.jsx(n.Label,{children:"Icon Class/Code"}),r.jsx(n.Control,{type:"text",name:"icon",value:a.values.icon,onChange:a.handleChange,placeholder:"e.g. fa-solid fa-mobile-screen"})]})}),r.jsx(l,{md:6,children:r.jsxs(n.Group,{controlId:"image",children:[r.jsx(n.Label,{children:"Image URL"}),r.jsx(n.Control,{type:"text",name:"image",value:a.values.image,onChange:a.handleChange,placeholder:"URL to device type image"})]})})]}),r.jsx(n.Group,{controlId:"is_active",className:"mb-3",children:r.jsx(n.Check,{type:"switch",id:"is_active",label:"Active",checked:a.values.is_active,onChange:a.handleChange,name:"is_active"})})]}),r.jsxs(t.Footer,{children:[r.jsx(C,{variant:"secondary",onClick:i,children:"Cancel"}),r.jsx(C,{variant:"primary",type:"submit",disabled:a.isSubmitting,children:a.isSubmitting?"Saving...":"Save Changes"})]})]})]})}export{M as D};
