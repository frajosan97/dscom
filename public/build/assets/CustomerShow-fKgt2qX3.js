import{r as j,R as f,j as e,$ as oe,Y as de}from"./app-Dad_-i9_.js";import{c as me,d as xe}from"./index-DVp0WoSw.js";import{S}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{P as n,R as $,y as L,I as U}from"./Footer-DlTkX6Mv.js";import{E as he}from"./ErpLayout-DMTrf_ot.js";import{f as O,a as v,c as pe}from"./helpers-DhZjpvwe.js";import{C as Z,E as Q,T as ue,G as ee,A as z,P as je,a as be,b as ge,S as fe}from"./SmsModal-CrI-5i_9.js";import"./CustomerModal-Bgmk4Zlv.js";import{C as p}from"./Card-Bgz6RJOm.js";import{x as ye}from"./axios-DzhX8CW2.js";import{u as ve}from"./useErrorToast-CH9_Lp_Y.js";import{S as E,a as Ne}from"./star-OpEl0hRi.js";import{C as we,B as N}from"./Image-BqRrxf8V.js";import{C as x,F as Ce}from"./Form-U4ModQtX.js";import{B as m}from"./Badge-CTkHH2k9.js";import{C as se}from"./calendar-DykUskWG.js";import{P as Se}from"./pencil-CS9Jnche.js";import{C as J}from"./credit-card-nE-CJf6R.js";import{P as I}from"./person-B--cq2OV.js";import{L as w}from"./ListGroup-CWUzYblM.js";import{A as Te}from"./Alert-CkvbrvMx.js";import{T as Oe}from"./Tabs-DzYlnz2o.js";import{T as P}from"./Tab-BBE0JvIx.js";import{E as ae}from"./eye-bldLR0nK.js";import{G as ke}from"./graph-up-DAaa1-jG.js";import{S as X}from"./search-BUrOgnVE.js";import{T as Pe}from"./Table-CKJkyCIB.js";import"./iconBase-Iw_lzYxk.js";import"./CloseButton-BfcxKKqK.js";/* empty css                      */import"./Modal-CgW4CF6b.js";import"./journal-C-ll6uT5.js";import"./index.esm-CZOLR_x4.js";import"./hoist-non-react-statics.cjs-C-Qo8PK8.js";var $e=["color","size","title","className"];function D(){return D=Object.assign?Object.assign.bind():function(s){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},D.apply(null,arguments)}function _e(s,l){if(s==null)return{};var a,t,r=ze(s,l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(t=0;t<i.length;t++)a=i[t],l.indexOf(a)===-1&&{}.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function ze(s,l){if(s==null)return{};var a={};for(var t in s)if({}.hasOwnProperty.call(s,t)){if(l.indexOf(t)!==-1)continue;a[t]=s[t]}return a}var R=j.forwardRef(function(s,l){var a=s.color,t=a===void 0?"currentColor":a,r=s.size,i=r===void 0?"1em":r,c=s.title,o=c===void 0?null:c,u=s.className,C=u===void 0?"":u,g=_e(s,$e);return f.createElement("svg",D({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:t,className:["bi","bi-bell",C].filter(Boolean).join(" ")},g),o?f.createElement("title",null,o):null,f.createElement("path",{d:"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4 4 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4 4 0 0 0-3.203-3.92zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5 5 0 0 1 13 6c0 .88.32 4.2 1.22 6"}))});R.propTypes={color:n.string,size:n.oneOfType([n.string,n.number]),title:n.string,className:n.string};var Ae=["color","size","title","className"];function Y(){return Y=Object.assign?Object.assign.bind():function(s){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},Y.apply(null,arguments)}function Me(s,l){if(s==null)return{};var a,t,r=Be(s,l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(t=0;t<i.length;t++)a=i[t],l.indexOf(a)===-1&&{}.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Be(s,l){if(s==null)return{};var a={};for(var t in s)if({}.hasOwnProperty.call(s,t)){if(l.indexOf(t)!==-1)continue;a[t]=s[t]}return a}var H=j.forwardRef(function(s,l){var a=s.color,t=a===void 0?"currentColor":a,r=s.size,i=r===void 0?"1em":r,c=s.title,o=c===void 0?null:c,u=s.className,C=u===void 0?"":u,g=Me(s,Ae);return f.createElement("svg",Y({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:t,className:["bi","bi-shop",C].filter(Boolean).join(" ")},g),o?f.createElement("title",null,o):null,f.createElement("path",{d:"M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.37 2.37 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0M1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5M4 15h3v-5H4zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm3 0h-2v3h2z"}))});H.propTypes={color:n.string,size:n.oneOfType([n.string,n.number]),title:n.string,className:n.string};var Le=["color","size","title","className"];function V(){return V=Object.assign?Object.assign.bind():function(s){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var t in a)({}).hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},V.apply(null,arguments)}function Ee(s,l){if(s==null)return{};var a,t,r=Ie(s,l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(t=0;t<i.length;t++)a=i[t],l.indexOf(a)===-1&&{}.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Ie(s,l){if(s==null)return{};var a={};for(var t in s)if({}.hasOwnProperty.call(s,t)){if(l.indexOf(t)!==-1)continue;a[t]=s[t]}return a}var F=j.forwardRef(function(s,l){var a=s.color,t=a===void 0?"currentColor":a,r=s.size,i=r===void 0?"1em":r,c=s.title,o=c===void 0?null:c,u=s.className,C=u===void 0?"":u,g=Ee(s,Le);return f.createElement("svg",V({ref:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:t,className:["bi","bi-tools",C].filter(Boolean).join(" ")},g),o?f.createElement("title",null,o):null,f.createElement("path",{d:"M1 0 0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.27 3.27a.997.997 0 0 0 1.414 0l1.586-1.586a.997.997 0 0 0 0-1.414l-3.27-3.27a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3q0-.405-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814zm9.646 10.646a.5.5 0 0 1 .708 0l2.914 2.915a.5.5 0 0 1-.707.707l-2.915-2.914a.5.5 0 0 1 0-.708M3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026z"}))});F.propTypes={color:n.string,size:n.oneOfType([n.string,n.number]),title:n.string,className:n.string};const T=({title:s,value:l,icon:a,color:t="primary",subtitle:r,trend:i,onClick:c,className:o=""})=>{const u={primary:"bg-primary bg-opacity-10 text-primary border-primary border-opacity-25",secondary:"bg-secondary bg-opacity-10 text-secondary border-secondary border-opacity-25",success:"bg-success bg-opacity-10 text-success border-success border-opacity-25",danger:"bg-danger bg-opacity-10 text-danger border-danger border-opacity-25",warning:"bg-warning bg-opacity-10 text-warning border-warning border-opacity-25",info:"bg-info bg-opacity-10 text-info border-info border-opacity-25",dark:"bg-dark bg-opacity-10 text-dark border-dark border-opacity-25",light:"bg-light bg-opacity-25 text-dark border-light"};return e.jsx(p,{className:`border-0 shadow-sm hover-lift ${u[t]} p-3 ${o}`,onClick:c,style:{cursor:c?"pointer":"default",transition:"all 0.3s ease",minHeight:"120px"},children:e.jsx(p.Body,{className:"p-0",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:`rounded-circle p-2 me-3 bg-${t} bg-opacity-25`,children:e.jsx("div",{className:`text-${t} h4 mb-0`,children:a})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted small mb-1",children:s}),e.jsx("div",{className:"fw-bold h3 mb-0",children:l})]})]}),r&&e.jsx("div",{className:"text-muted small mb-2",children:r}),i&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("span",{className:`badge bg-${_(i)} bg-opacity-25 text-${_(i)} me-2`,children:[i.includes("+")?"â†—":"â†˜"," ",i]}),e.jsx("span",{className:`text-${_(i)} small`,children:i.includes("+")?"Increase":"Decrease"})]})]}),i&&e.jsx("div",{className:`text-${_(i)} h4`,children:i.includes("+")?"ðŸ“ˆ":"ðŸ“‰"})]})})})},_=s=>s?s.includes("+")?"success":s.includes("-")?"danger":"secondary":"secondary";T.propTypes={title:n.string.isRequired,value:n.oneOfType([n.string,n.number]).isRequired,icon:n.element.isRequired,color:n.oneOf(["primary","secondary","success","danger","warning","info","dark","light"]),subtitle:n.string,trend:n.string,onClick:n.func,className:n.string};T.defaultProps={color:"primary",className:""};function Ss({customer:s}){const{showErrorToast:l}=ve(),[a,t]=j.useState("overview"),[r,i]=j.useState(!1),[c,o]=j.useState(!1),[u,C]=j.useState(!1),[g,Fe]=j.useState(""),h=j.useMemo(()=>{var d,y,k,K;return{totalSpent:((d=s.orders)==null?void 0:d.reduce((M,B)=>M+(B.total_amount||0),0))||0,orderCount:((y=s.orders)==null?void 0:y.length)||0,serviceCount:((k=s.services)==null?void 0:k.length)||0,avgOrderValue:(K=s.orders)!=null&&K.length?s.orders.reduce((M,B)=>M+(B.total_amount||0),0)/s.orders.length:0,loyaltyTier:ie(s.total_spent||0)}},[s]),[le,re]=j.useState({phoneNumber:s.phone||"",callType:"outgoing",notes:"",duration:"",status:"completed"}),[A,W]=j.useState({customerId:s.id,phoneNumber:(s==null?void 0:s.phone)||"",message:""});function ie(d){return d>=1e4?{name:"Platinum",color:"primary",icon:e.jsx(me,{})}:d>=5e3?{name:"Gold",color:"warning",icon:e.jsx(E,{})}:d>=1e3?{name:"Silver",color:"secondary",icon:e.jsx(Ne,{})}:{name:"Bronze",color:"success",icon:null}}const q=d=>{const y={retail:{color:"info",label:"Retail"},wholesale:{color:"warning",label:"Wholesale"},corporate:{color:"success",label:"Corporate"},vip:{color:"danger",label:"VIP"},regular:{color:"secondary",label:"Regular"}};return y[d==null?void 0:d.toLowerCase()]||y.regular},ne=async d=>{if(d.preventDefault(),!!(await S.fire({title:"ðŸ“± Send SMS?",text:"This message will be sent immediately.",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, send it!",cancelButtonText:"Cancel"})).isConfirmed){S.fire({title:"Sending SMS...",text:"Please wait while we send your message",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>S.showLoading()});try{const k=await ye.post(route("send-sms"),A);L.success("ðŸ“¨ SMS sent successfully!"),W({...A,message:""})}catch(k){l(k)}finally{S.close(),o(!1)}}},ce=async d=>{d.preventDefault(),(await S.fire({title:"ðŸ“ž Initiate Call?",text:"You will be redirected to your phone dialer",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, call now!",cancelButtonText:"Cancel"})).isConfirmed&&(s!=null&&s.phone?(window.location.href=`tel:${s.phone}`,L.info("ðŸ“ž Redirecting to phone dialer...")):S.fire({icon:"error",title:"No Phone Number",text:"This customer doesn't have a phone number registered."}))};return e.jsxs(he,{children:[e.jsx(oe,{title:`${s.name} - Customer Account`}),e.jsxs(we,{fluid:!0,className:"py-4 customer-account-page",children:[e.jsx($,{className:"mb-4 align-items-center",children:e.jsxs(x,{lg:12,children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 mb-3",children:[e.jsxs("div",{className:"position-relative",children:[e.jsx("img",{src:s.profile_image_url,alt:"Profile",className:"rounded-circle border border-3 border-light shadow",style:{width:"70px",height:"70px",objectFit:"cover"}}),e.jsx(m,{bg:s.is_active?"success":"danger",className:"position-absolute bottom-0 end-0 border border-2 border-white",pill:!0,children:s.is_active?"âœ“":"âœ—"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"fw-bold mb-1 text-gradient-primary text-capitalize",children:s.name}),e.jsxs("div",{className:"d-flex gap-2 align-items-center text-muted",children:[e.jsx(m,{bg:q(s.customer_type).color,className:"text-capitalize",children:q(s.customer_type).label}),e.jsx("span",{className:"text-muted",children:"â€¢"}),e.jsxs("span",{children:[e.jsx(se,{size:14,className:"me-1"}),"Member since"," ",O(s.created_at,"MMM YYYY")]}),e.jsx("span",{className:"text-muted",children:"â€¢"}),e.jsxs(m,{bg:h.loyaltyTier.color,className:"d-flex align-items-center gap-1",children:[h.loyaltyTier.icon,h.loyaltyTier.name]}),e.jsx("span",{className:"text-muted",children:"â€¢"}),e.jsxs(m,{as:de,href:route("customers.edit",s.id),children:[e.jsx(Se,{className:"me-2"})," Edit Profile"]})]})]})]}),e.jsxs($,{className:"g-3",children:[e.jsx(x,{xs:6,md:3,children:e.jsx(T,{title:"Total Spent",value:v(h.totalSpent),icon:e.jsx(Z,{}),color:"primary",trend:"+12.5%"})}),e.jsx(x,{xs:6,md:3,children:e.jsx(T,{title:"Total Orders",value:h.orderCount,icon:e.jsx(H,{}),color:"success",subtitle:`${h.avgOrderValue?v(h.avgOrderValue):"N/A"} avg`})}),e.jsx(x,{xs:6,md:3,children:e.jsx(T,{title:"Services",value:h.serviceCount,icon:e.jsx(F,{}),color:"warning"})}),e.jsx(x,{xs:6,md:3,children:e.jsx(T,{title:"Current Balance",value:v(s.balance||0),icon:e.jsx(J,{}),color:s.balance>=0?"info":"danger",subtitle:s.balance>=0?"Credit Available":"Overdue"})})]})]})}),e.jsxs($,{children:[e.jsx(x,{xl:3,lg:4,className:"mb-4",children:e.jsx(p,{className:"border-0 shadow-lg h-100",children:e.jsxs(p.Body,{className:"p-4",children:[e.jsxs("h6",{className:"fw-semibold mb-3 text-primary d-flex align-items-center",children:[e.jsx(I,{className:"me-2"})," Contact Information"]}),e.jsxs(w,{variant:"flush",className:"mb-4",children:[e.jsxs(w.Item,{className:"d-flex align-items-center px-0 py-2",children:[e.jsx(Q,{className:"text-primary me-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("small",{className:"text-muted d-block",children:"Email"}),e.jsx("span",{className:"text-break",children:s.email||"Not provided"})]})]}),e.jsxs(w.Item,{className:"d-flex align-items-center px-0 py-2",children:[e.jsx(ue,{className:"text-primary me-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("small",{className:"text-muted d-block",children:"Phone"}),e.jsx("span",{children:s.phone||"Not provided"})]})]}),e.jsxs(w.Item,{className:"d-flex align-items-center px-0 py-2",children:[e.jsx(ee,{className:"text-primary me-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("small",{className:"text-muted d-block",children:"Location"}),e.jsx("span",{children:s.city||s.state?`${s.city||""}${s.city&&s.state?", ":""}${s.state||""}`:"Not specified"})]})]})]}),e.jsxs("h6",{className:"fw-semibold mb-3 text-primary d-flex align-items-center",children:[e.jsx(E,{className:"me-2"})," Loyalty & Balance"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("span",{className:"text-muted",children:"Loyalty Points"}),e.jsx(m,{bg:"warning",className:"fs-6",children:s.loyalty_points||0})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-muted",children:"Account Balance"}),e.jsx("span",{className:`fw-bold ${s.balance>=0?"text-success":"text-danger"}`,children:v(s.balance||0)})]}),s.balance<0&&e.jsxs(Te,{variant:"danger",className:"mt-2 py-2",size:"sm",children:[e.jsx(R,{size:14,className:"me-2"}),"Overdue balance - Consider following up"]})]}),e.jsxs("h6",{className:"fw-semibold mb-3 text-primary d-flex align-items-center",children:[e.jsx(z,{className:"me-2"})," Quick Actions"]}),e.jsxs("div",{className:"d-grid gap-2",children:[e.jsxs(N,{variant:"outline-primary",className:"rounded-pill text-start d-flex align-items-center justify-content-between",onClick:()=>i(!0),children:[e.jsxs("span",{children:[e.jsx(je,{className:"me-2"})," Make a Call"]}),e.jsx(m,{bg:"light",text:"dark",pill:!0,children:"ðŸ“ž"})]}),e.jsxs(N,{variant:"outline-success",className:"rounded-pill text-start d-flex align-items-center justify-content-between",onClick:()=>o(!0),children:[e.jsxs("span",{children:[e.jsx(be,{className:"me-2"})," Send Message"]}),e.jsx(m,{bg:"light",text:"dark",pill:!0,children:"ðŸ’¬"})]}),e.jsxs(N,{variant:"outline-warning",className:"rounded-pill text-start d-flex align-items-center justify-content-between",onClick:()=>L.info("Feature coming soon!"),children:[e.jsxs("span",{children:[e.jsx(R,{className:"me-2"})," Send Reminder"]}),e.jsx(m,{bg:"light",text:"dark",pill:!0,children:"â°"})]}),e.jsxs(N,{variant:"outline-info",className:"rounded-pill text-start d-flex align-items-center justify-content-between",onClick:()=>window.open(`mailto:${s.email}`,"_blank"),disabled:!s.email,children:[e.jsxs("span",{children:[e.jsx(Q,{className:"me-2"})," Send Email"]}),e.jsx(m,{bg:"light",text:"dark",pill:!0,children:"ðŸ“§"})]})]})]})})}),e.jsx(x,{xl:9,lg:8,children:e.jsx(p,{className:"border-0 shadow-lg h-100",children:e.jsxs(p.Body,{className:"p-0",children:[e.jsxs(Oe,{activeKey:a,onSelect:d=>t(d),className:"px-4 pt-4 border-bottom",fill:!0,children:[e.jsx(P,{eventKey:"overview",title:e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(I,{className:"me-2"})," ","Overview"]})}),e.jsx(P,{eventKey:"orders",title:e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(H,{className:"me-2"})," Orders",h.orderCount>0&&e.jsx(m,{bg:"primary",pill:!0,className:"ms-2",children:h.orderCount})]})}),e.jsx(P,{eventKey:"services",title:e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(F,{className:"me-2"})," ","Services",h.serviceCount>0&&e.jsx(m,{bg:"warning",pill:!0,className:"ms-2",children:h.serviceCount})]})}),e.jsx(P,{eventKey:"payments",title:e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(J,{className:"me-2"})," ","Payments"]})}),e.jsx(P,{eventKey:"activity",title:e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(z,{className:"me-2"})," ","Activity"]})})]}),e.jsxs("div",{className:"p-4",children:[a==="overview"&&e.jsx(De,{customer:s}),a==="orders"&&e.jsx(Re,{customer:s,searchTerm:g}),a==="services"&&e.jsx(Ye,{customer:s,searchTerm:g}),a==="payments"&&e.jsx(He,{customer:s,searchTerm:g}),a==="activity"&&e.jsx(Ve,{customer:s})]})]})})})]})]}),e.jsx(ge,{showCallModal:r,setShowCallModal:i,customer:s,callDetails:le,setCallDetails:re,handleCallNow:ce}),e.jsx(fe,{showSendSmsModal:c,setShowSendSmsModal:o,customer:s,smsDetails:A,setSmsDetails:W,handleSmsSubmit:ne})]})}const De=({customer:s})=>{var a;const l=s.date_of_birth?pe(s.date_of_birth):null;return e.jsx("div",{children:e.jsxs($,{className:"g-4",children:[e.jsx(x,{md:6,children:e.jsx(p,{className:"border-0 bg-light",children:e.jsxs(p.Body,{children:[e.jsxs("h6",{className:"fw-semibold mb-3 text-primary",children:[e.jsx(I,{className:"me-2"})," Personal Details"]}),e.jsxs(w,{variant:"flush",children:[e.jsx(b,{label:"Full Name",value:s.name}),e.jsx(b,{label:"Gender",value:e.jsx(m,{bg:s.gender==="male"?"info":"danger",children:s.gender?s.gender.charAt(0).toUpperCase()+s.gender.slice(1):"N/A"})}),e.jsx(b,{label:"Date of Birth",value:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsx("span",{children:O(s.date_of_birth)||"N/A"}),l&&e.jsxs(m,{bg:"secondary",children:[l," years"]})]})}),e.jsx(b,{label:"Customer ID",value:e.jsx("code",{className:"text-primary",children:s.id})}),e.jsx(b,{label:"Customer Since",value:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(se,{size:14,className:"me-2 text-muted"}),O(s.created_at,"MMMM DD, YYYY")]})})]})]})})}),e.jsx(x,{md:6,children:e.jsx(p,{className:"border-0 bg-light",children:e.jsxs(p.Body,{children:[e.jsxs("h6",{className:"fw-semibold mb-3 text-primary",children:[e.jsx(ee,{className:"me-2"})," Address Details"]}),e.jsxs(w,{variant:"flush",children:[e.jsx(b,{label:"Address",value:s.address||"Not provided"}),e.jsx(b,{label:"City",value:s.city}),e.jsx(b,{label:"State/Province",value:s.state}),e.jsx(b,{label:"Postal Code",value:s.postal_code}),e.jsx(b,{label:"Country",value:s.country})]})]})})}),e.jsx(x,{md:12,children:e.jsx(p,{className:"border-0 bg-light",children:e.jsxs(p.Body,{children:[e.jsxs("h6",{className:"fw-semibold mb-3 text-primary",children:[e.jsx(z,{className:"me-2"})," Customer Insights"]}),e.jsxs($,{className:"g-3",children:[e.jsx(x,{md:4,children:e.jsxs("div",{className:"text-center p-3 bg-white rounded",children:[e.jsx("div",{className:"text-primary mb-2",children:e.jsx(xe,{size:24})}),e.jsx("h4",{className:"fw-bold",children:((a=s.orders)==null?void 0:a.length)||0}),e.jsx("p",{className:"text-muted mb-0",children:"Total Orders"}),e.jsx("small",{className:"text-success",children:"+12% from last month"})]})}),e.jsx(x,{md:4,children:e.jsxs("div",{className:"text-center p-3 bg-white rounded",children:[e.jsx("div",{className:"text-warning mb-2",children:e.jsx(E,{size:24})}),e.jsx("h4",{className:"fw-bold",children:s.loyalty_points||0}),e.jsx("p",{className:"text-muted mb-0",children:"Loyalty Points"}),e.jsx("small",{className:"text-success",children:"Earn 50 more for next tier"})]})}),e.jsx(x,{md:4,children:e.jsxs("div",{className:"text-center p-3 bg-white rounded",children:[e.jsx("div",{className:"text-success mb-2",children:e.jsx(Z,{size:24})}),e.jsx("h4",{className:"fw-bold",children:v(s.total_spent||0)}),e.jsx("p",{className:"text-muted mb-0",children:"Lifetime Value"}),e.jsx("small",{className:"text-success",children:"Top 15% customer"})]})})]})]})})})]})})},Re=({customer:s,searchTerm:l})=>{var t;const a=((t=s.orders)==null?void 0:t.filter(r=>{var i;return!l||r.id.toString().includes(l)||((i=r.status)==null?void 0:i.toLowerCase().includes(l.toLowerCase()))}))||[];return e.jsx(G,{title:"Order History",data:a,columns:[{key:"id",label:"Order ID",render:r=>`#${r}`},{key:"created_at",label:"Date",render:r=>O(r)},{key:"items_count",label:"Items",render:r=>r||0},{key:"total_amount",label:"Amount",render:r=>v(r)},{key:"status",label:"Status",render:r=>e.jsx(m,{bg:te(r),pill:!0,children:r||"Pending"})},{key:"actions",label:"Actions",render:()=>e.jsx(N,{variant:"outline-primary",size:"sm",children:e.jsx(ae,{size:14})})}],emptyMessage:"No orders found for this customer.",searchPlaceholder:"Search orders by ID or status..."})},Ye=({customer:s,searchTerm:l})=>e.jsx(G,{title:"Service History",data:s.services||[],columns:[{key:"id",label:"Service ID",render:a=>`#${a}`},{key:"created_at",label:"Date",render:a=>O(a)},{key:"service_type",label:"Service Type"},{key:"technician",label:"Technician"},{key:"status",label:"Status",render:a=>e.jsx(m,{bg:te(a),pill:!0,children:a})},{key:"actions",label:"Actions",render:()=>e.jsx(N,{variant:"outline-warning",size:"sm",children:e.jsx(ae,{size:14})})}],emptyMessage:"No service history available.",searchPlaceholder:"Search services..."}),He=({customer:s,searchTerm:l})=>e.jsx(G,{title:"Payment History",data:s.payments||[],columns:[{key:"id",label:"Payment ID",render:a=>`#${a}`},{key:"created_at",label:"Date",render:a=>O(a)},{key:"amount",label:"Amount",render:a=>v(a)},{key:"payment_method",label:"Method"},{key:"status",label:"Status",render:a=>e.jsx(m,{bg:a==="completed"?"success":"warning",pill:!0,children:a})},{key:"reference",label:"Reference"}],emptyMessage:"No payment records found.",searchPlaceholder:"Search payments..."}),Ve=({customer:s})=>e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"mb-4",children:e.jsx(z,{size:48,className:"text-muted"})}),e.jsx("h5",{className:"text-muted mb-3",children:"Activity Timeline"}),e.jsx("p",{className:"text-muted",children:"Recent customer activities will appear here"}),e.jsxs(N,{variant:"outline-primary",children:[e.jsx(ke,{className:"me-2"})," View Full Activity Log"]})]}),b=({label:s,value:l})=>e.jsxs(w.Item,{className:"px-0 py-3 d-flex justify-content-between align-items-center border-bottom",children:[e.jsx("span",{className:"text-muted",children:s}),e.jsx("span",{className:"fw-semibold text-end",children:l||"â€”"})]}),G=({title:s,data:l,columns:a,emptyMessage:t,searchPlaceholder:r,onSearch:i})=>e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h6",{className:"fw-semibold mb-0",children:s}),e.jsxs(U,{style:{width:"300px"},children:[e.jsx(U.Text,{children:e.jsx(X,{})}),e.jsx(Ce.Control,{placeholder:r,onChange:c=>i&&i(c.target.value)})]})]}),l.length>0?e.jsx("div",{className:"table-responsive rounded border",children:e.jsxs(Pe,{hover:!0,className:"mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsx("tr",{children:a.map(c=>e.jsx("th",{className:"border-0",children:c.label},c.key))})}),e.jsx("tbody",{children:l.map(c=>e.jsx("tr",{children:a.map(o=>e.jsx("td",{children:o.render?o.render(c[o.key],c):c[o.key]||"â€”"},`${c.id}-${o.key}`))},c.id))})]})}):e.jsxs("div",{className:"text-center py-5 bg-light rounded",children:[e.jsx(X,{size:48,className:"text-muted mb-3"}),e.jsx("h5",{className:"text-muted",children:t})]})]}),te=s=>({completed:"success",pending:"warning",processing:"info",cancelled:"danger",delivered:"primary",shipped:"secondary"})[s==null?void 0:s.toLowerCase()]||"secondary";export{Ss as default};
