import{r as l,m as u,j as e,$ as h}from"./app-BHgsMdMN.js";import{y as i,R as x}from"./Footer-D2ooF5pp.js";import{E as g}from"./ErpLayout-BrY7BVt6.js";import{u as j}from"./useData-CTeE6K4V.js";import{C as T,B as _}from"./Image-DXsOGyib.js";import{C as c}from"./Form-C31rj1ON.js";import{B as k}from"./ButtonGroup-uLXoY3tg.js";import{C as m}from"./Card-DbtgvX4L.js";import{T as y}from"./Table-D7zmiFHo.js";import"./CloseButton-qahUCrdS.js";/* empty css                      */function O(){const{categories:p,brands:f,branches:b}=j(),[d,v]=l.useState({branch_id:"",catalogue_id:"",brand_id:"",is_verified:"",is_low_stock:"",is_active:""});b.map(t=>({value:t.id,label:t.name})),p.map(t=>({value:t.id,label:t.name})),f.map(t=>({value:t.id,label:t.name}));const n=l.useCallback(()=>{$.fn.DataTable.isDataTable("#productsTable")&&$("#productsTable").DataTable().destroy();const t=$("#productsTable").DataTable({processing:!0,serverSide:!0,ajax:{url:route("product.index"),type:"GET",data:function(s){return{...s,...d}},error:s=>{var a;i.error(((a=s.responseJSON)==null?void 0:a.message)||"Failed to load products")}},columns:[{data:"product_image",title:"Image"},{data:"product_name",title:"Name"},{data:"price_list",title:"Pricing (Ksh)"},{data:"status_badge",title:"Status"},{data:"action",title:"Actions"}],order:[[1,"asc"]],drawCallback:function(){$(".edit-btn").off("click").on("click",function(){const s=$(this).data("id");u.get(route("product.edit",s))}),$(".delete-btn").off("click").on("click",function(){const s=$(this).data("id");confirm("Are you sure you want to delete this product?")&&axios.delete(route("product.destroy",s)).then(a=>{t.ajax.reload(),i.success(a.data.message)}).catch(a=>{var r,o;i.error(((o=(r=a.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to delete product")})}),$(".feature-btn").off("click").on("click",function(){const s=$(this).data("id");axios.post(route("product.toggle-featured",s)).then(a=>{t.ajax.reload(),i.success(a.data.message)}).catch(a=>{var r,o;i.error(((o=(r=a.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to update featured status")})})}});return t},[d]);return l.useEffect(()=>{const t=n();return()=>{$.fn.DataTable.isDataTable("#productsTable")&&t.destroy()}},[n]),e.jsxs(g,{children:[e.jsx(h,{title:"Products Management"}),e.jsx(T,{children:e.jsxs(x,{className:"g-3",children:[e.jsxs(c,{md:12,className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"mb-0",children:"Products"}),e.jsx(k,{className:"gap-2",children:e.jsxs(_,{variant:"primary",className:"rounded",onClick:()=>u.get(route("product.create")),children:[e.jsx("i",{className:"bi bi-plus-circle me-2"}),"Add Product"]})})]}),e.jsx(c,{md:12,children:e.jsx("hr",{className:"dashed-hr"})}),e.jsx(c,{md:12,children:e.jsx(m,{children:e.jsx(m.Body,{className:"position-relative",children:e.jsx(y,{bordered:!0,striped:!0,hover:!0,responsive:!0,id:"productsTable",className:"w-100"})})})})]})})]})}export{O as default};
