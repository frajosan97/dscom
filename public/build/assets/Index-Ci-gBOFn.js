import{r as d,m as r,j as e,$ as p}from"./app-DDPmmEsP.js";import{y as u,B as b,R as h}from"./Footer-DHiARg5T.js";import{E as x}from"./ErpLayout-BTroGK5i.js";import{f as v,a as j}from"./helpers-B-PK6d0z.js";import{C as g,B as T}from"./Image-CfrpkxQr.js";import{C as i}from"./Form-Cqgl9C35.js";import{B as C}from"./ButtonGroup-BveU2NPQ.js";import{C as m}from"./Card-BnTkWAgR.js";import{T as y}from"./Table-DWCTgkd7.js";import"./CloseButton-bKfF9Hr0.js";/* empty css                      */function L(){const o=d.useCallback(()=>{$.fn.DataTable.isDataTable("#servicesTable")&&$("#servicesTable").DataTable().destroy();const a=$("#servicesTable").DataTable({processing:!0,serverSide:!0,ajax:{url:route("services.index"),type:"GET"},columns:[{data:"order_number",title:"Order #"},{data:"customer_name",title:"Customer"},{data:"service_name",title:"Service"},{data:"total_amount",title:"Amount",render:function(t){return v(t)}},{data:"status",title:"Status",render:function(t){return e.jsx(b,{bg:f(t),children:t})}},{data:"expected_completion_date",title:"Completion Date",render:function(t){return t?j(t):"N/A"}},{data:"action",title:"Actions",orderable:!1,searchable:!1}],order:[[5,"asc"]],drawCallback:function(){$(".view-btn").off("click").on("click",function(){const t=$(this).data("id");r.get(route("services.show",t))}),$(".edit-btn").off("click").on("click",function(){const t=$(this).data("id");r.get(route("services.edit",t))}),$(".status-btn").off("click").on("click",function(){const t=$(this).data("id"),n=$(this).data("status");confirm(`Are you sure you want to mark this service as ${n}?`)&&axios.post(route("services.update-status",{id:t,status:n})).then(s=>{a.ajax.reload(),u.success(s.data.message)}).catch(s=>{var c,l;u.error(((l=(c=s.response)==null?void 0:c.data)==null?void 0:l.message)||"Failed to update status")})})}});return a},[]),f=a=>{switch(a.toLowerCase()){case"completed":return"success";case"repairing":return"primary";case"cancelled":return"danger";case"pending":return"warning";case"diagnosis":return"info";case"quoted":return"secondary";default:return"light"}};return d.useEffect(()=>{const a=o();return()=>{$.fn.DataTable.isDataTable("#servicesTable")&&a.destroy()}},[o]),e.jsxs(x,{children:[e.jsx(p,{title:"Service Management"}),e.jsx(g,{children:e.jsxs(h,{className:"g-3",children:[e.jsxs(i,{md:12,className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"mb-0",children:"Service Orders"}),e.jsx(C,{className:"gap-2",children:e.jsxs(T,{variant:"primary",className:"rounded",onClick:()=>r.get(route("services.create")),children:[e.jsx("i",{className:"bi bi-plus-circle me-2"}),"New Service"]})})]}),e.jsx(i,{md:12,children:e.jsx("hr",{className:"dashed-hr"})}),e.jsx(i,{md:12,children:e.jsx(m,{children:e.jsx(m.Body,{className:"position-relative",children:e.jsx(y,{bordered:!0,striped:!0,hover:!0,responsive:!0,id:"servicesTable",className:"w-100"})})})})]})})]})}export{L as default};
