import{r as x,j as e,m as p}from"./app-CXGUi3Ii.js";import{u as b}from"./formik.esm-CpXjc-UR.js";import{c as j,a as n}from"./index.esm-C6HOpLtu.js";import{R as C,y as v}from"./Footer-C1n_XnQr.js";import{u as f}from"./useErrorToast-DvKgSG3a.js";import{x as y}from"./axios-DRIjC2mC.js";import{M as l}from"./Modal-MA4UI1jI.js";import{F as r,C as o}from"./Form-XjuXZqOk.js";import{B as m}from"./Image-5TVfYuAD.js";const g=j().shape({name:n().required("Customer name is required").max(255,"Customer name must not exceed 255 characters"),email:n().email("Invalid email address").max(255,"Email must not exceed 255 characters"),phone:n().max(20,"Phone number must not exceed 20 characters"),tax_number:n().max(50,"Tax number must not exceed 50 characters"),address:n().max(500,"Address must not exceed 500 characters")});function w({show:i,onClose:d,customer:s=null}){const{showErrorToast:u}=f(),a=b({initialValues:{name:"",email:"",phone:"",tax_number:"",address:""},validationSchema:g,enableReinitialize:!0,onSubmit:async(c,{setSubmitting:h})=>{try{const t=s?route("customers.update",s.id):route("customers.store");(await y[s?"put":"post"](t,c)).data.success&&(v.success(s?"Customer updated successfully.":"Customer added successfully."),d(),p.reload())}catch(t){u(t)}finally{h(!1)}}});return x.useEffect(()=>{s?a.setValues({name:s.name||"",email:s.email||"",phone:s.phone||"",tax_number:s.tax_number||"",address:s.address||""}):a.resetForm()},[s,i]),e.jsxs(l,{show:i,onHide:d,size:"lg",centered:!0,children:[e.jsx(l.Header,{closeButton:!0,className:"border-bottom-0",children:e.jsx(l.Title,{className:"h5",children:s?"Edit Customer":"Add New Customer"})}),e.jsxs(r,{onSubmit:a.handleSubmit,noValidate:!0,children:[e.jsx(l.Body,{className:"pt-0",children:e.jsxs(C,{children:[e.jsx(o,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsxs(r.Label,{children:["Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(r.Control,{type:"text",name:"name",placeholder:"Customer name",value:a.values.name,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.name&&!!a.errors.name,required:!0}),e.jsx(r.Control.Feedback,{type:"invalid",children:a.errors.name})]})}),e.jsx(o,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Email"}),e.jsx(r.Control,{type:"email",name:"email",placeholder:"Customer email",value:a.values.email,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.email&&!!a.errors.email}),e.jsx(r.Control.Feedback,{type:"invalid",children:a.errors.email})]})}),e.jsx(o,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Phone"}),e.jsx(r.Control,{type:"text",name:"phone",placeholder:"Phone number",value:a.values.phone,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.phone&&!!a.errors.phone}),e.jsx(r.Control.Feedback,{type:"invalid",children:a.errors.phone})]})}),e.jsx(o,{md:6,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Tax Number"}),e.jsx(r.Control,{type:"text",name:"tax_number",placeholder:"Tax identification number",value:a.values.tax_number,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.tax_number&&!!a.errors.tax_number}),e.jsx(r.Control.Feedback,{type:"invalid",children:a.errors.tax_number})]})}),e.jsx(o,{md:12,children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Address"}),e.jsx(r.Control,{as:"textarea",rows:3,name:"address",placeholder:"Full address",value:a.values.address,onChange:a.handleChange,onBlur:a.handleBlur,isInvalid:a.touched.address&&!!a.errors.address}),e.jsx(r.Control.Feedback,{type:"invalid",children:a.errors.address})]})})]})}),e.jsxs(l.Footer,{className:"border-top-0",children:[e.jsx(m,{variant:"outline-secondary",onClick:d,children:"Cancel"}),e.jsx(m,{variant:"primary",type:"submit",disabled:a.isSubmitting,children:a.isSubmitting?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):s?"Update Customer":"Save Customer"})]})]})]})}export{w as C};
