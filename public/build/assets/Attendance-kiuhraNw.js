import{r as o,R,j as e,$ as $e}from"./app-DCWOQcEB.js";import{b as Te,c as Ae,d as Re,e as re,f as ce,g as Ee,h as Le,i as Be,j as Fe,k as Me,l as Pe,m as Ie,n as ie,o as me,p as De}from"./index-eKalaMO-.js";import{P as v,y as u,R as I,I as Q,D as B}from"./Footer-BFclObC5.js";import{x as T}from"./axios-D5EJL0v2.js";import{f as U}from"./helpers-DfyTVTVS.js";import{E as Oe}from"./ErpLayout-BGMVtiLM.js";import{C as ze}from"./clock-eEU_iId2.js";import{A as oe}from"./activity-CO4LxBv6.js";import{C as _e,B as g}from"./Image-DQmrh284.js";import{C as b,F as m}from"./Form-Dvgdn8VD.js";import{P as Ge}from"./plus-DyFA7Unp.js";import{C as x}from"./Card-DPWBKIrz.js";import{C as Qe}from"./calendar-F_rdBadL.js";import{P as He}from"./ProgressBar-B5IoA_NI.js";import{B as F}from"./Badge-JNCvcmkv.js";import{B as qe}from"./ButtonGroup-54EaPK8M.js";import{D as ue}from"./download-3_ywfNUR.js";import{S as Ue}from"./search-Lt6mJVUG.js";import{A as he}from"./Alert-CbPGieWs.js";import{P as We}from"./person-check-BoEQmRfB.js";import{T as Ye}from"./trash-8buSpayL.js";import{T as Ve}from"./Table-BBH_MeAL.js";import{L as P}from"./ListGroup-C-jrC7rI.js";import{B as Ke}from"./bell-LtqHqRDv.js";import{M as j}from"./Modal-Fiv6pqri.js";import{T as Je}from"./Tabs-CtbjJpso.js";import{T as de}from"./Tab-D0qdGo_8.js";import"./iconBase-DX_qyhUT.js";import"./CloseButton-1IPjPb9C.js";/* empty css                      */var Xe=["color","size","title","className"];function W(){return W=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(n[i]=a[i])}return n},W.apply(null,arguments)}function Ze(n,r){if(n==null)return{};var a,i,l=et(n,r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(n);for(i=0;i<h.length;i++)a=h[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(n,a)&&(l[a]=n[a])}return l}function et(n,r){if(n==null)return{};var a={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(r.indexOf(i)!==-1)continue;a[i]=n[i]}return a}var xe=o.forwardRef(function(n,r){var a=n.color,i=a===void 0?"currentColor":a,l=n.size,h=l===void 0?"1em":l,w=n.title,p=w===void 0?null:w,f=n.className,A=f===void 0?"":f,M=Ze(n,Xe);return R.createElement("svg",W({ref:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:h,height:h,fill:i,className:["bi","bi-map",A].filter(Boolean).join(" ")},M),p?R.createElement("title",null,p):null,R.createElement("path",{fillRule:"evenodd",d:"M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.5.5 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103M10 1.91l-4-.8v12.98l4 .8zm1 12.98 4-.8V1.11l-4 .8zm-6-.8V1.11l-4 .8v12.98z"}))});xe.propTypes={color:v.string,size:v.oneOfType([v.string,v.number]),title:v.string,className:v.string};var tt=["color","size","title","className"];function Y(){return Y=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(n[i]=a[i])}return n},Y.apply(null,arguments)}function st(n,r){if(n==null)return{};var a,i,l=at(n,r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(n);for(i=0;i<h.length;i++)a=h[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(n,a)&&(l[a]=n[a])}return l}function at(n,r){if(n==null)return{};var a={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(r.indexOf(i)!==-1)continue;a[i]=n[i]}return a}var pe=o.forwardRef(function(n,r){var a=n.color,i=a===void 0?"currentColor":a,l=n.size,h=l===void 0?"1em":l,w=n.title,p=w===void 0?null:w,f=n.className,A=f===void 0?"":f,M=st(n,tt);return R.createElement("svg",Y({ref:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:h,height:h,fill:i,className:["bi","bi-person-dash",A].filter(Boolean).join(" ")},M),p?R.createElement("title",null,p):null,R.createElement("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7M11 12h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1m0-7a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"}),R.createElement("path",{d:"M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"}))});pe.propTypes={color:v.string,size:v.oneOfType([v.string,v.number]),title:v.string,className:v.string};function Gt(){const[n,r]=o.useState(!1),[a,i]=o.useState(()=>new Date().toISOString().split("T")[0]),[l,h]=o.useState({totalEmployees:0,presentCount:0,absentCount:0,lateCount:0,onLeaveCount:0,attendanceRate:0}),[w,p]=o.useState(!1),[f,A]=o.useState([]),[M,V]=o.useState(!1),[be,K]=o.useState(!1),[je,J]=o.useState(!1),[fe,ge]=o.useState({workStartTime:"09:00",workEndTime:"17:00",lateThreshold:15,earlyLeaveThreshold:30,enableGeoLocation:!0,requireReasonForAbsence:!0,autoCalculateHours:!0}),[D,ye]=o.useState(""),[C,ve]=o.useState("all"),[ke,Ne]=o.useState([]),[X,Z]=o.useState([]),[ct,it]=o.useState("daily"),[ot,dt]=o.useState(new Date().toISOString().slice(0,7)),O=o.useRef(!1),E=o.useRef(null),S=o.useCallback(async()=>{try{const s=await T.get(route("attendance.stats"),{params:{date:a}});h(s.data)}catch(s){console.error("Failed to fetch attendance stats:",s)}},[a]),ee=o.useCallback(async()=>{try{const s=await T.get(route("departments.index"));Ne(s.data)}catch(s){console.error("Failed to fetch departments:",s)}},[]),te=o.useCallback(async()=>{try{const s=await T.get(route("attendance.activities"));Z(s.data)}catch(s){console.error("Failed to fetch activities:",s)}},[]),z=o.useMemo(()=>l.totalEmployees===0?0:l.presentCount/l.totalEmployees*100,[l]),_=o.useCallback(async(s,t,d,c={})=>{var y,k,L;r(!0);try{const N=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),q={id:s,clockIn:t==="clockIn"?N:null,clockOut:t==="clockOut"?N:null,status:"present",reason:c.reason,notes:c.notes,location:c.location,device:c.device};(await T.post(route("attendance.store"),{date:a,attendance:[q]})).data.success&&(u.success(e.jsxs("div",{children:[e.jsx("strong",{children:d})," ",t==="clockIn"?"clocked in":"clocked out"," ","successfully",e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:N})]})),Z(Se=>[{id:Date.now(),employee_name:d,action:t==="clockIn"?"clock_in":"clock_out",time:N,status:"completed",icon:t==="clockIn"?e.jsx(ze,{}):e.jsx(oe,{})},...Se.slice(0,9)]),(y=E.current)==null||y.ajax.reload(null,!1),S())}catch(N){console.error("Mark attendance error:",N);const q=t==="clockIn"?"clock in":"clock out";u.error(((L=(k=N.response)==null?void 0:k.data)==null?void 0:L.message)||`Failed to ${q}`)}finally{r(!1)}},[a,S]),H=o.useCallback(async(s,t,d)=>{if(!navigator.geolocation)return u.warning("Geolocation is not supported by your browser"),_(s,t,d);navigator.geolocation.getCurrentPosition(async c=>{const y={latitude:c.coords.latitude,longitude:c.coords.longitude,accuracy:c.coords.accuracy};_(s,t,d,{location:JSON.stringify(y),device:navigator.userAgent})},c=>{u.error("Unable to retrieve location. Please enable location services."),_(s,t,d)})},[_]),G=o.useCallback(async(s,t="present")=>{var d,c,y;if(f.length===0){u.warning("Please select employees first");return}r(!0);try{const k=f.map(N=>({id:N.id,clockIn:s==="clockIn"?"09:00":null,clockOut:s==="clockOut"?"17:00":null,status:t,reason:"Bulk update"}));(await T.post(route("attendance.bulk"),{date:a,attendance:k})).data.success&&(u.success(`${f.length} employees marked as ${t}`),A([]),(d=E.current)==null||d.ajax.reload(null,!1),S())}catch(k){u.error(((y=(c=k.response)==null?void 0:c.data)==null?void 0:y.message)||"Failed to update attendance")}finally{r(!1)}},[a,f,S]),se=o.useCallback(async(s,t)=>{var c,y,k;const{value:d}=await Swal.fire({title:`Reset ${t}'s Attendance?`,input:"textarea",inputLabel:"Reason for reset",inputPlaceholder:"Enter reason...",showCancelButton:!0,confirmButtonText:"Yes, reset it",cancelButtonText:"Cancel",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"});if(d){r(!0);try{(await T.delete(route("attendance.destroy",s),{data:{reason:d}})).data.success&&(u.success(e.jsxs("div",{children:["Attendance record reset successfully",e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["Reason: ",d]})]})),(c=E.current)==null||c.ajax.reload(null,!1),S())}catch(L){u.error(((k=(y=L.response)==null?void 0:y.data)==null?void 0:k.message)||"Failed to reset attendance record")}finally{r(!1)}}},[S]),ae=o.useCallback(async()=>{r(!0);try{const s=await T.post(route("attendance.qr-generate"),{date:a,expires_in:3600});V(!0),u.success("QR Code generated successfully!")}catch{u.error("Failed to generate QR code")}finally{r(!1)}},[a]),ne=o.useCallback(async s=>{r(!0);try{const t=await T.get(route("attendance.export"),{params:{date:a,format:s,department:C!=="all"?C:null},responseType:"blob"}),d=window.URL.createObjectURL(new Blob([t.data])),c=document.createElement("a");c.href=d,c.setAttribute("download",`attendance-${a}-${s}.${s==="pdf"?"pdf":"xlsx"}`),document.body.appendChild(c),c.click(),c.remove(),window.URL.revokeObjectURL(d),u.success(`Attendance exported as ${s.toUpperCase()} successfully!`)}catch{u.error(`Failed to export as ${s.toUpperCase()}`)}finally{r(!1)}},[a,C]),le=o.useCallback(()=>{if(O.current)return;$.fn.DataTable.isDataTable("#attendanceRegisterTable")&&$("#attendanceRegisterTable").DataTable().destroy();const s=$("#attendanceRegisterTable").DataTable({processing:!0,serverSide:!0,ajax:{url:route("attendance.index"),type:"GET",data:{date:a,search:D,department:C!=="all"?C:null}},columns:[{data:null,orderable:!1,className:"text-center",render:function(t){return`
                            <div class="form-check">
                                <input class="form-check-input employee-checkbox" type="checkbox" 
                                       data-id="${t.id}" data-name="${t.name}">
                            </div>
                        `}},{data:"name",name:"name",title:"Employee",className:"text-start",render:function(t,d,c){return`
                            <div class="d-flex align-items-center">
                                <div class="avatar-sm me-2">
                                    <div class="avatar-title bg-primary bg-opacity-10 rounded-circle">
                                        <i class="bi bi-person fs-5 text-primary"></i>
                                    </div>
                                </div>
                                <div>
                                    <h6 class="mb-0">${t}</h6>
                                    <small class="text-muted">${c.employee_id||""}</small>
                                </div>
                            </div>
                        `}},{data:"department.name",name:"department.name",title:"Department",className:"text-start",render:function(t){return t?`<span class="badge bg-${{Sales:"primary",Marketing:"info",Engineering:"warning",HR:"success",Finance:"danger",Operations:"secondary"}[t]||"secondary"}">${t}</span>`:"-"}},{data:"clockin",name:"clockin",title:"Clock In",className:"text-center",render:function(t){return t?`
                            <div>
                                <span class="badge bg-success">${t}</span>
                                ${this.late?'<small class="text-danger ms-1"><i class="bi bi-exclamation-circle"></i> Late</small>':""}
                            </div>
                        `:`
                            <button class="btn btn-sm btn-outline-success clock-in-btn"
                                    data-id="${this.id}" data-name="${this.name}">
                                <i class="bi bi-clock"></i> Clock In
                            </button>
                        `}},{data:"clockout",name:"clockout",title:"Clock Out",className:"text-center",render:function(t){return!t&&this.clockin?`
                            <button class="btn btn-sm btn-outline-danger clock-out-btn" 
                                    data-id="${this.id}" data-name="${this.name}">
                                <i class="bi bi-clock"></i> Clock Out
                            </button>
                        `:t?`<span class="badge bg-danger">${t}</span>`:"-"}},{data:"status",name:"status",title:"Status",className:"text-center",render:function(t){const c={present:{color:"success",icon:"check-circle",label:"Present"},absent:{color:"danger",icon:"x-circle",label:"Absent"},late:{color:"warning",icon:"clock-history",label:"Late"},on_leave:{color:"info",icon:"calendar3",label:"On Leave"},half_day:{color:"secondary",icon:"clock-half",label:"Half Day"}}[t]||{color:"secondary",icon:"question-circle",label:"Unknown"};return`
                            <span class="badge bg-${c.color}">
                                <i class="bi bi-${c.icon} me-1"></i>${c.label}
                            </span>
                        `}},{data:"hours_worked",name:"hours_worked",title:"Hours",className:"text-center",render:function(t){return t?`
                            <div class="progress" style="height: 6px; width: 80px;">
                                <div class="progress-bar bg-success" role="progressbar" 
                                     style="width: ${Math.min(100,parseFloat(t)/8*100)}%">
                                </div>
                            </div>
                            <small>${t}h</small>
                        `:"-"}},{data:"id",name:"actions",title:"Actions",orderable:!1,className:"text-center",render:function(t,d,c){return`
                            <div class="btn-group btn-group-sm" role="group">
                                <button type="button" class="btn btn-outline-primary view-btn" 
                                        data-id="${t}" title="View Details">
                                    <i class="bi bi-eye"></i>
                                </button>
                                <button type="button" class="btn btn-outline-warning edit-btn" 
                                        data-id="${t}" title="Edit">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button type="button" class="btn btn-outline-danger reset-btn" 
                                        data-id="${t}" data-name="${c.name}" title="Reset">
                                    <i class="bi bi-arrow-clockwise"></i>
                                </button>
                            </div>
                        `}}],language:{emptyTable:"No attendance records found for selected date",search:"Filter employees:",searchPlaceholder:"By name, department, or status..."},select:{style:"multi",selector:"td:first-child"},createdRow:function(t,d,c){d.late&&$(t).addClass("table-warning"),d.status==="absent"&&$(t).addClass("table-danger")}});$(s.table().body()).on("change",".employee-checkbox",function(){const t=$(this).data("id"),d=$(this).data("name"),c=$(this).is(":checked");A(y=>c?[...y,{id:t,name:d}]:y.filter(k=>k.id!==t))}).on("click",".clock-in-btn",function(){const t=$(this).data("id"),d=$(this).data("name");Swal.fire({title:`Clock In ${d}?`,text:"Add notes (optional):",input:"textarea",inputPlaceholder:"Enter notes...",showCancelButton:!0,confirmButtonText:"Clock In",cancelButtonText:"Cancel",confirmButtonColor:"#3085d6"}).then(c=>{c.isConfirmed&&H(t,"clockIn",d,{notes:c.value})})}).on("click",".clock-out-btn",function(){const t=$(this).data("id"),d=$(this).data("name");H(t,"clockOut",d)}).on("click",".reset-btn",function(){const t=$(this).data("id"),d=$(this).data("name");se(t,d)}).on("click",".view-btn",function(){const t=$(this).data("id");u.info(`Viewing attendance record ${t}`)}).on("click",".edit-btn",function(){const t=$(this).data("id");u.info(`Editing attendance record ${t}`)}),$("#selectAllEmployees").on("change",function(){const t=$(this).is(":checked");$(".employee-checkbox").prop("checked",t).trigger("change")}),O.current=!0,E.current=s},[a,D,C,H,se]),we=s=>{i(s.target.value)};o.useEffect(()=>(le(),S(),ee(),te(),()=>{$.fn.DataTable.isDataTable("#attendanceRegisterTable")&&($("#attendanceRegisterTable").DataTable().destroy(),O.current=!1)}),[le,S,ee,te]),o.useEffect(()=>{O.current&&E.current&&E.current.ajax.reload()},[a,D,C]);const Ce=[{icon:e.jsx(ce,{}),label:"Mark All Present",variant:"success",onClick:()=>G("clockIn","present")},{icon:e.jsx(re,{}),label:"Mark All Absent",variant:"danger",onClick:()=>G("clockIn","absent")},{icon:e.jsx(ie,{}),label:"Generate QR",variant:"info",onClick:ae},{icon:e.jsx(me,{}),label:"Location Check",variant:"warning",onClick:()=>K(!0)},{icon:e.jsx(De,{}),label:"Send Reminder",variant:"primary",onClick:()=>u.info("Reminder sent to absent employees")}];return e.jsxs(Oe,{children:[e.jsx($e,{title:"Attendance Management"}),e.jsxs(_e,{fluid:!0,children:[e.jsx(I,{className:"mb-4",children:e.jsxs(b,{xl:12,children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"fw-bold text-primary",children:"Attendance Management"}),e.jsx("p",{className:"text-muted mb-0",children:"Track and manage employee attendance in real-time"})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(g,{variant:"outline-primary",onClick:()=>J(!0),children:[e.jsx(Te,{className:"me-2"})," Settings"]}),e.jsxs(g,{variant:"primary",onClick:()=>u.info("Adding new attendance rule"),children:[e.jsx(Ge,{className:"me-2"})," Add Rule"]})]})]}),e.jsxs(I,{className:"g-3",children:[e.jsx(b,{xs:6,md:4,lg:2,children:e.jsx(x,{className:"border-0 bg-primary bg-opacity-10",children:e.jsxs(x.Body,{className:"p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-muted mb-1",children:"Total"}),e.jsx("h4",{className:"fw-bold mb-0",children:l.totalEmployees})]}),e.jsx(Ae,{size:24,className:"text-primary"})]}),e.jsx("small",{className:"text-muted",children:"Employees"})]})})}),e.jsx(b,{xs:6,md:4,lg:2,children:e.jsx(x,{className:"border-0 bg-success bg-opacity-10",children:e.jsxs(x.Body,{className:"p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-muted mb-1",children:"Present"}),e.jsx("h4",{className:"fw-bold mb-0",children:l.presentCount})]}),e.jsx(Re,{size:24,className:"text-success"})]}),e.jsx("small",{className:"text-muted",children:l.presentCount>0?`${(l.presentCount/l.totalEmployees*100).toFixed(1)}%`:"0%"})]})})}),e.jsx(b,{xs:6,md:4,lg:2,children:e.jsx(x,{className:"border-0 bg-danger bg-opacity-10",children:e.jsxs(x.Body,{className:"p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-muted mb-1",children:"Absent"}),e.jsx("h4",{className:"fw-bold mb-0",children:l.absentCount})]}),e.jsx(re,{size:24,className:"text-danger"})]}),e.jsx("small",{className:"text-muted",children:l.absentCount>0?`${(l.absentCount/l.totalEmployees*100).toFixed(1)}%`:"0%"})]})})}),e.jsx(b,{xs:6,md:4,lg:2,children:e.jsx(x,{className:"border-0 bg-warning bg-opacity-10",children:e.jsxs(x.Body,{className:"p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-muted mb-1",children:"Late"}),e.jsx("h4",{className:"fw-bold mb-0",children:l.lateCount})]}),e.jsx(ce,{size:24,className:"text-warning"})]}),e.jsx("small",{className:"text-muted",children:"Arrivals"})]})})}),e.jsx(b,{xs:6,md:4,lg:2,children:e.jsx(x,{className:"border-0 bg-info bg-opacity-10",children:e.jsxs(x.Body,{className:"p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-muted mb-1",children:"On Leave"}),e.jsx("h4",{className:"fw-bold mb-0",children:l.onLeaveCount})]}),e.jsx(Qe,{size:24,className:"text-info"})]}),e.jsx("small",{className:"text-muted",children:"Approved"})]})})}),e.jsx(b,{xs:6,md:4,lg:2,children:e.jsx(x,{className:"border-0 bg-purple bg-opacity-10",children:e.jsxs(x.Body,{className:"p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-muted mb-1",children:"Attendance Rate"}),e.jsxs("h4",{className:"fw-bold mb-0",children:[z.toFixed(1),"%"]})]}),e.jsx(Ee,{size:24,className:"text-purple"})]}),e.jsx(He,{now:z,variant:z>=90?"success":z>=70?"warning":"danger",style:{height:"4px"}})]})})})]})]})}),e.jsxs(I,{children:[e.jsx(b,{xl:9,lg:8,children:e.jsxs(x,{className:"border-0 shadow-sm",children:[e.jsxs(x.Header,{className:"d-flex justify-content-between align-items-center bg-transparent py-3",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("h6",{className:"mb-0 fw-semibold",children:"Daily Attendance Register"}),e.jsx(F,{bg:"light",text:"dark",className:"border",children:U(a,"DD MMM, YYYY")}),f.length>0&&e.jsxs(F,{bg:"primary",pill:!0,children:[f.length," selected"]})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs(Q,{style:{width:"200px"},children:[e.jsx(Q.Text,{children:e.jsx(Le,{})}),e.jsx(m.Control,{type:"date",value:a,onChange:we,disabled:n})]}),e.jsx(qe,{children:e.jsxs(B,{children:[e.jsxs(B.Toggle,{variant:"outline-success",id:"export-dropdown",children:[e.jsx(ue,{})," Export"]}),e.jsxs(B.Menu,{children:[e.jsxs(B.Item,{onClick:()=>ne("pdf"),children:[e.jsx(Be,{className:"me-2 text-danger"})," ","PDF Report"]}),e.jsxs(B.Item,{onClick:()=>ne("excel"),children:[e.jsx(Fe,{className:"me-2 text-success"})," ","Excel Sheet"]}),e.jsxs(B.Item,{onClick:()=>u.info("Printing..."),children:[e.jsx(Me,{className:"me-2 text-secondary"})," ","Print"]})]})]})})]})]}),e.jsxs(x.Body,{className:"p-0",children:[e.jsx("div",{className:"p-3 border-bottom bg-light",children:e.jsxs(I,{className:"g-2",children:[e.jsx(b,{md:6,children:e.jsxs(Q,{children:[e.jsx(Q.Text,{children:e.jsx(Ue,{})}),e.jsx(m.Control,{placeholder:"Search employees...",value:D,onChange:s=>ye(s.target.value)}),e.jsx(g,{variant:"outline-secondary",children:e.jsx(Pe,{})})]})}),e.jsx(b,{md:4,children:e.jsxs(m.Select,{value:C,onChange:s=>ve(s.target.value),children:[e.jsx("option",{value:"all",children:"All Departments"}),ke.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx(b,{md:2,children:e.jsx(m.Check,{type:"switch",id:"selectAllEmployees",label:"Select All",className:"pt-2"})})]})}),f.length>0&&e.jsx(he,{variant:"info",className:"m-3 py-2",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("span",{children:[e.jsx("strong",{children:f.length})," ","employees selected"]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(g,{variant:"success",size:"sm",onClick:()=>G("clockIn","present"),children:[e.jsx(We,{className:"me-1"})," ","Mark Present"]}),e.jsxs(g,{variant:"danger",size:"sm",onClick:()=>G("clockIn","absent"),children:[e.jsx(pe,{className:"me-1"})," ","Mark Absent"]}),e.jsxs(g,{variant:"outline-secondary",size:"sm",onClick:()=>A([]),children:[e.jsx(Ye,{className:"me-1"})," ","Clear"]})]})]})}),e.jsx("div",{className:"p-3 border-bottom",children:e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Ce.map((s,t)=>e.jsxs(g,{variant:s.variant,size:"sm",className:"d-flex align-items-center",onClick:s.onClick,disabled:n,children:[s.icon,e.jsx("span",{className:"ms-2",children:s.label})]},t))})}),e.jsx("div",{className:"table-responsive",children:e.jsx(Ve,{bordered:!0,hover:!0,responsive:!0,id:"attendanceRegisterTable",className:"m-0 align-middle"})})]})]})}),e.jsxs(b,{xl:3,lg:4,children:[e.jsx(x,{className:"border-0 shadow-sm mb-3",children:e.jsxs(x.Body,{children:[e.jsxs("h6",{className:"fw-semibold mb-3",children:[e.jsx(oe,{className:"me-2"})," Today's Summary"]}),e.jsxs(P,{variant:"flush",children:[e.jsxs(P.Item,{className:"d-flex justify-content-between align-items-center px-0 py-2",children:[e.jsx("span",{className:"text-muted",children:"Expected"}),e.jsx(F,{bg:"light",text:"dark",children:l.totalEmployees})]}),e.jsxs(P.Item,{className:"d-flex justify-content-between align-items-center px-0 py-2",children:[e.jsx("span",{className:"text-muted",children:"Checked In"}),e.jsx(F,{bg:"success",children:l.presentCount})]}),e.jsxs(P.Item,{className:"d-flex justify-content-between align-items-center px-0 py-2",children:[e.jsx("span",{className:"text-muted",children:"Pending"}),e.jsx(F,{bg:"warning",children:l.totalEmployees-l.presentCount})]}),e.jsxs(P.Item,{className:"d-flex justify-content-between align-items-center px-0 py-2",children:[e.jsx("span",{className:"text-muted",children:"Late Arrivals"}),e.jsx(F,{bg:"danger",children:l.lateCount})]})]})]})}),e.jsx(x,{className:"border-0 shadow-sm mb-3",children:e.jsxs(x.Body,{children:[e.jsxs("h6",{className:"fw-semibold mb-3",children:[e.jsx(Ke,{className:"me-2"})," Recent Activity"]}),e.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto"},children:[X.map(s=>e.jsxs("div",{className:"d-flex align-items-start mb-3",children:[e.jsx("div",{className:"avatar-sm me-3",children:e.jsx("div",{className:`avatar-title rounded-circle bg-${s.status==="completed"?"success":"warning"}-subtle`,children:s.icon})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h6",{className:"mb-0 fs-14",children:s.employee_name}),e.jsxs("p",{className:"text-muted mb-0 fs-12",children:[s.action==="clock_in"?"Clocked in at":"Clocked out at"," ",s.time]}),e.jsx("small",{className:"text-muted",children:U(s.created_at,"hh:mm A")})]})]},s.id)),X.length===0&&e.jsx("p",{className:"text-muted text-center py-3",children:"No recent activity"})]})]})}),e.jsx(x,{className:"border-0 shadow-sm",children:e.jsxs(x.Body,{children:[e.jsxs("h6",{className:"fw-semibold mb-3",children:[e.jsx(Ie,{className:"me-2"})," Mobile Check-in"]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-light rounded p-4 mb-3",children:[e.jsx(ie,{size:48,className:"text-primary mb-2"}),e.jsx("p",{className:"text-muted mb-2",children:"Scan QR code to check-in"}),e.jsx(g,{variant:"outline-primary",size:"sm",onClick:ae,children:"Generate QR Code"})]}),e.jsx("small",{className:"text-muted",children:"Employees can scan QR code or use mobile app to check-in"})]})]})})]})]}),e.jsx(nt,{show:je,onHide:()=>J(!1),settings:fe,onSave:s=>{ge(s),u.success("Attendance settings updated!")}}),e.jsx(lt,{show:M,onHide:()=>V(!1),date:a}),e.jsx(rt,{show:be,onHide:()=>K(!1)})]})]})}const nt=({show:n,onHide:r,settings:a,onSave:i})=>{const[l,h]=o.useState(a),w=()=>{i(l),r()};return e.jsxs(j,{show:n,onHide:r,size:"lg",children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:"Attendance Settings"})}),e.jsx(j.Body,{children:e.jsxs(Je,{defaultActiveKey:"general",className:"mb-3",children:[e.jsx(de,{eventKey:"general",title:"General",children:e.jsx(m,{children:e.jsxs(I,{className:"g-3",children:[e.jsx(b,{md:6,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{children:"Work Start Time"}),e.jsx(m.Control,{type:"time",value:l.workStartTime,onChange:p=>h({...l,workStartTime:p.target.value})})]})}),e.jsx(b,{md:6,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{children:"Work End Time"}),e.jsx(m.Control,{type:"time",value:l.workEndTime,onChange:p=>h({...l,workEndTime:p.target.value})})]})}),e.jsx(b,{md:6,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{children:"Late Threshold (minutes)"}),e.jsx(m.Control,{type:"number",value:l.lateThreshold,onChange:p=>h({...l,lateThreshold:parseInt(p.target.value)})})]})}),e.jsx(b,{md:6,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{children:"Early Leave Threshold (minutes)"}),e.jsx(m.Control,{type:"number",value:l.earlyLeaveThreshold,onChange:p=>h({...l,earlyLeaveThreshold:parseInt(p.target.value)})})]})})]})})}),e.jsx(de,{eventKey:"advanced",title:"Advanced",children:e.jsxs(m,{children:[e.jsx(m.Check,{type:"switch",id:"enable-geo",label:"Enable Geolocation Tracking",checked:l.enableGeoLocation,onChange:p=>h({...l,enableGeoLocation:p.target.checked}),className:"mb-3"}),e.jsx(m.Check,{type:"switch",id:"require-reason",label:"Require Reason for Absence",checked:l.requireReasonForAbsence,onChange:p=>h({...l,requireReasonForAbsence:p.target.checked}),className:"mb-3"}),e.jsx(m.Check,{type:"switch",id:"auto-calculate",label:"Auto-calculate Work Hours",checked:l.autoCalculateHours,onChange:p=>h({...l,autoCalculateHours:p.target.checked}),className:"mb-3"})]})})]})}),e.jsxs(j.Footer,{children:[e.jsx(g,{variant:"secondary",onClick:r,children:"Cancel"}),e.jsx(g,{variant:"primary",onClick:w,children:"Save Changes"})]})]})},lt=({show:n,onHide:r,date:a})=>e.jsxs(j,{show:n,onHide:r,centered:!0,children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:"Attendance QR Code"})}),e.jsxs(j.Body,{className:"text-center",children:[e.jsx("div",{className:"bg-light p-4 rounded mb-3",children:e.jsx("div",{className:"qr-placeholder bg-white p-4 d-inline-block",children:e.jsx("div",{style:{width:"200px",height:"200px",background:"linear-gradient(45deg, #f3f3f3 25%, transparent 25%, transparent 75%, #f3f3f3 75%, #f3f3f3), linear-gradient(45deg, #f3f3f3 25%, transparent 25%, transparent 75%, #f3f3f3 75%, #f3f3f3)",backgroundSize:"40px 40px",backgroundPosition:"0 0, 20px 20px"}})})}),e.jsx("p",{className:"text-muted mb-2",children:"Scan this QR code to check-in"}),e.jsxs("small",{className:"text-muted d-block mb-2",children:["Valid for: ",U(a,"DD MMM, YYYY")]}),e.jsx("small",{className:"text-muted",children:"Expires in: 1 hour"})]}),e.jsxs(j.Footer,{className:"justify-content-center",children:[e.jsxs(g,{variant:"primary",onClick:()=>u.info("QR code downloaded"),children:[e.jsx(ue,{className:"me-2"})," Download QR"]}),e.jsx(g,{variant:"outline-primary",onClick:()=>u.info("QR code shared"),children:"Share"})]})]}),rt=({show:n,onHide:r})=>e.jsxs(j,{show:n,onHide:r,children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:"Location-Based Attendance"})}),e.jsxs(j.Body,{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(xe,{size:48,className:"text-primary mb-3"}),e.jsx("h5",{children:"Enable Location Services"}),e.jsx("p",{className:"text-muted",children:"Allow location access for accurate attendance tracking. Employees must be within company premises to check-in."})]}),e.jsxs(he,{variant:"info",children:[e.jsx(me,{className:"me-2"}),e.jsx("strong",{children:"Current Location:"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("small",{children:"Latitude: 40.7128° N"}),e.jsx("br",{}),e.jsx("small",{children:"Longitude: 74.0060° W"}),e.jsx("br",{}),e.jsx("small",{children:"Accuracy: ±10 meters"})]})]}),e.jsxs(m,{children:[e.jsxs(m.Group,{className:"mb-3",children:[e.jsx(m.Label,{children:"Allowed Radius (meters)"}),e.jsx(m.Range,{min:"10",max:"500",defaultValue:"100"}),e.jsx("small",{className:"text-muted",children:"100m radius from office center"})]}),e.jsx(m.Check,{type:"switch",id:"enable-wifi",label:"Require Company WiFi",className:"mb-3"})]})]}),e.jsxs(j.Footer,{children:[e.jsx(g,{variant:"secondary",onClick:r,children:"Cancel"}),e.jsx(g,{variant:"primary",onClick:()=>{u.success("Location settings updated!"),r()},children:"Save Settings"})]})]});export{Gt as default};
